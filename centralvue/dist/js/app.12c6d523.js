(function(){"use strict";var e={1351:function(e,o,t){var a=t(5130),l=(t(5524),t(7768)),i=t(8221),d=t(1920),r=t(5741),n=t(1387),s=t(6768),c=t(4232);const u={style:{"margin-top":"20px"}},p={style:{"margin-top":"20px"}},m={class:"divimagen"},b={class:"divimagen"};function g(e,o,t,a,l,i){const d=(0,s.g2)("v-card-subtitle"),r=(0,s.g2)("v-text-field"),n=(0,s.g2)("v-btn"),g=(0,s.g2)("v-card"),f=(0,s.g2)("v-img"),k=(0,s.g2)("v-progress-circular"),v=(0,s.g2)("v-card-title"),h=(0,s.g2)("v-card-text"),_=(0,s.g2)("v-dialog"),y=(0,s.g2)("v-spacer"),F=(0,s.g2)("v-card-actions"),w=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(w,{class:"fondito d-flex justify-center align-center",fluid:"",style:{height:"100vh","background-color":"burlywood"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,{style:{height:"85%",width:"35%"},class:"pa-0 ma-0 card-content"},{default:(0,s.k6)((()=>[o[7]||(o[7]=(0,s.Lk)("p",{class:"mb-5",style:{"font-size":"15px",color:"black"}}," Bienvenido a Cotecsa ",-1)),(0,s.bF)(d,null,{default:(0,s.k6)((()=>o[5]||(o[5]=[(0,s.eW)(" Por favor ingresa tus credenciales ")]))),_:1}),(0,s.Lk)("div",u,[(0,s.bF)(r,{modelValue:l.usuario,"onUpdate:modelValue":o[0]||(o[0]=e=>l.usuario=e),style:{color:"blue"},dense:"",width:"200px",label:"Usuario",variant:"underlined"},null,8,["modelValue"]),(0,s.bF)(r,{type:l.mostrar?"text":"password",modelValue:l.contrasena,"onUpdate:modelValue":o[1]||(o[1]=e=>l.contrasena=e),style:{color:"blue"},dense:"",width:"200px",label:"Contraseña","append-inner-icon":l.mostrar?"mdi-eye-off":"mdi-eye","onClick:appendInner":i.mostrarcontrasena,variant:"underlined"},null,8,["type","modelValue","append-inner-icon","onClick:appendInner"])]),(0,s.Lk)("div",p,[(0,s.bF)(n,{style:{"background-color":"blue",color:"white","border-radius":"20px"},"min-width":"200px","max-width":"200px",onClick:i.login},{default:(0,s.k6)((()=>o[6]||(o[6]=[(0,s.eW)("Ingresar")]))),_:1},8,["onClick"])])])),_:1}),(0,s.bF)(g,{style:{height:"85%",width:"35%","background-color":"blue"},class:"pa-0 ma-0"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",m,[(0,s.bF)(f,{src:l.sol,contain:""},null,8,["src"])]),(0,s.Lk)("div",b,[(0,s.bF)(f,{src:l.logo,contain:""},null,8,["src"])])])),_:1}),(0,s.bF)(_,{modelValue:l.loading,"onUpdate:modelValue":o[2]||(o[2]=e=>l.loading=e),"max-width":"300"},{default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,{indeterminate:"",color:"primary"})])),_:1}),(0,s.bF)(h,null,{default:(0,s.k6)((()=>o[8]||(o[8]=[(0,s.eW)(" Espere un momento... ")]))),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(_,{modelValue:l.alertvisible,"onUpdate:modelValue":o[4]||(o[4]=e=>l.alertvisible=e),"max-width":"500"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{style:(0,c.Tr)(l.coloralert)},{default:(0,s.k6)((()=>[(0,s.bF)(v,{style:(0,c.Tr)(l.titleStyle),class:"headline"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(l.dialogtitulo),1)])),_:1},8,["style"]),(0,s.bF)(h,{style:(0,c.Tr)(l.textoStyle),"align-center":""},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(l.alertmessage),1)])),_:1},8,["style"]),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(y),(0,s.bF)(n,{text:"",style:(0,c.Tr)(l.buttonColor),onClick:o[3]||(o[3]=e=>l.alertvisible=!1)},{default:(0,s.k6)((()=>o[9]||(o[9]=[(0,s.eW)("OK")]))),_:1},8,["style"])])),_:1})])),_:1},8,["style"])])),_:1},8,["modelValue"])])),_:1})}t(4114);var f=t.p+"img/bodegoncito.683d182a.png",k=t(5730),v=t(4373),h=t(782),_={name:"LoginForm",data(){return{apiUrl:"http://127.0.0.1:4000",usuario:"",contrasena:"",mostrar:!1,logo:f,sol:k,config_request:{headers:{"Content-type":"application/json"}},alertvisible:!1,loading:!1,alertmessage:"",coloralert:{},titleStyle:{},textoStyle:{},buttonColor:{},dialogtitulo:""}},methods:{...(0,h.PY)(["setUsuario","setRol"]),async login(){console.log("Intentando iniciar sesión..."),this.loading=!0;try{const o=await v.A.post(`${this.apiUrl}/api/login`,{nickname:this.usuario,contrasena:this.contrasena},this.config_request);if(console.log(`aqui : ${o}`),200==o.status){this.loading=!0,console.log(this.loading);var e=o.data;console.log(e),console.log(e.nombres);const{usuario:t}=e;console.log({usuario:t}),console.log("NOMBRESSSSSSSSSSSS"),console.log(t.nombres),this.setUsuario(o.data.usuario),console.log("Usuario almacenado en Vuex:",this.$store.state.usuario),this.setRol(t.rol_id),console.log(this.setRol(t.rol_id)),2==t.rol_id?(this.$router.push("/home"),console.log(this.$router.push("/home"))):1==t.rol_id||this.$router.push("/")}}catch(o){o.response&&401===o.response.status?(this.loading=!1,console.log("....dentro del 401"),this.alertmessage="Credenciales inválidas. Por favor intente de nuevo.",this.alertvisible=!0,this.coloralert={backgroundColor:"#ff5733"},this.titleStyle={color:"#ffffff"},this.textoStyle={color:"#ffffff "},this.dialogtitulo="Usuario inválido",this.buttonColor={color:"#ffffff"}):o.response&&404===o.response.status?(console.log("....dentro del 404"),this.alertmessage="Credenciales inválidas. Por favor intente de nuevo.",this.alertvisible=!0):(console.error(`Error query login ${o}`),this.alertmessage="Ocurrió un error. Por favor intente de nuevo más tarde.",this.alertvisible=!0)}this.loading=!1},mostrarcontrasena(){this.mostrar=!this.mostrar}}},y=t(1241);const F=(0,y.A)(_,[["render",g],["__scopeId","data-v-980d03e0"]]);var w=F;const P={class:"custom-header"},C={key:0,class:"monto-texto"},E={key:1,class:"monto-texto"},x={key:2,class:"monto-texto"},V={class:"monto-texto"};function D(e,o,a,l,i,d){const r=(0,s.g2)("v-col"),n=(0,s.g2)("v-row"),u=(0,s.g2)("v-card-title"),p=(0,s.g2)("v-card-text"),m=(0,s.g2)("v-img"),b=(0,s.g2)("v-card"),g=(0,s.g2)("v-data-table");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"12",class:"alineartexto"},{default:(0,s.k6)((()=>o[0]||(o[0]=[(0,s.Lk)("p",{style:{"margin-left":"20px"}},"Pedidos",-1)]))),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"12",md:"4",lg:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",style:{"background-color":"royalblue"},class:"tarjetas-headers"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{style:{color:"white","font-weight":"bold"}},{default:(0,s.k6)((()=>o[1]||(o[1]=[(0,s.eW)(" Entregados ")]))),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"tarjetatexto",style:{color:"white"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(i.pedidosEntregadosCount)+" pedidos ",1)])),_:1})])),_:1}),(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"imagen-card",src:t(4074)},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{cols:"12",md:"4",lg:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",style:{"background-color":"cadetblue"},class:"tarjetas-headers"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{style:{color:"white","font-weight":"bold"}},{default:(0,s.k6)((()=>o[2]||(o[2]=[(0,s.eW)(" Procesos ")]))),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"tarjetatexto",style:{color:"white"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(i.pedidosProceso)+" pedidos ",1)])),_:1})])),_:1}),(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"imagen-card",src:t(5634)},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{cols:"12",md:"4",lg:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",style:{"background-color":"darkseagreen"}},{default:(0,s.k6)((()=>[(0,s.bF)(u,{style:{color:"white","font-weight":"bold"}},{default:(0,s.k6)((()=>o[3]||(o[3]=[(0,s.eW)(" Pendientes ")]))),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"tarjetatexto",style:{color:"white"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(i.pedidosPendientesCount)+" pedidos ",1)])),_:1})])),_:1}),(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"imagen-card",src:t(8007)},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6",class:"alineartexto"},{default:(0,s.k6)((()=>o[4]||(o[4]=[(0,s.Lk)("p",null,"Clientes nuevos",-1)]))),_:1}),(0,s.bF)(r,{cols:"6",class:"alineartexto"},{default:(0,s.k6)((()=>o[5]||(o[5]=[(0,s.Lk)("p",null,"Montos",-1)]))),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",class:"clientes"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{style:{"background-color":"steelblue",color:"white"},headers:i.headers,items:i.items,"item-key":"id","items-per-page":2},{["column.header.name"]:(0,s.k6)((({headers:e})=>[(0,s.Lk)("span",P,(0,c.v_)(e.title),1)])),_:2},1032,["headers","items"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"3"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",class:"montotarjeta",style:{"background-color":"cadetblue"}},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>o[6]||(o[6]=[(0,s.eW)(" Monto Entregados ")]))),_:1}),(0,s.bF)(m,{class:"ima-montos",src:t(8275)},null,8,["src"]),i.isLoading?((0,s.uX)(),(0,s.CE)("p",C,"Cargando...")):null!==i.pedidosEntregados?((0,s.uX)(),(0,s.CE)("p",E,(0,c.v_)(d.formatNumber(i.pedidosEntregados)),1)):((0,s.uX)(),(0,s.CE)("p",x,"Error al cargar datos"))])),_:1})])),_:1}),(0,s.bF)(r,{cols:"3"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8",class:"montotarjeta",style:{"background-color":"cadetblue"}},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>o[7]||(o[7]=[(0,s.eW)(" Monto Pendientes ")]))),_:1}),(0,s.bF)(m,{class:"ima-montos",src:t(2944)},null,8,["src"]),(0,s.Lk)("p",V,(0,c.v_)(d.formatNumber(i.pedidosPendientes)),1)])),_:1})])),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6",class:"alineartexto"},{default:(0,s.k6)((()=>o[8]||(o[8]=[(0,s.Lk)("p",null,"Conductores",-1)]))),_:1}),(0,s.bF)(r,{cols:"6",class:"alineartexto"},{default:(0,s.k6)((()=>o[9]||(o[9]=[(0,s.Lk)("p",null,"Pedidos aceptados",-1)]))),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"tablacond",headers:i.headersConductores,items:i.conductores,"item-key":"id","items-per-page":"2"},null,8,["headers","items"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"6"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"tablacond",headers:i.headersPedidos,items:i.pedidosAceptados,"item-key":"id","items-per-page":"2"},null,8,["headers","items"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[10]||(o[10]=[(0,s.Lk)("p",null," Pedidos Entregados en Total",-1)]))),_:1}),(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[11]||(o[11]=[(0,s.Lk)("p",null,"Pedidos Entregados del Mes",-1)]))),_:1}),(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[12]||(o[12]=[(0,s.Lk)("p",null,"Pedidos Entregados del Día",-1)]))),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"tablacondPedido",headers:i.headersPedidosTotal,items:i.pedidoTotal,"item-key":"id","items-per-page":"2"},null,8,["headers","items"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"tablacondPedTotal",headers:i.headersPedidosTotalMes,items:i.pedidoTotalMes,"item-key":"id","items-per-page":"2"},null,8,["headers","items"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{elevation:"8"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"tablacondPedTotal",headers:i.headersPedidosTotalDia,items:i.pedidoTotalDia,"item-key":"id","items-per-page":"2"},null,8,["headers","items"])])),_:1})])),_:1})])),_:1})],64)}var A={name:"Inicio",data(){return{apiUrl:"http://127.0.0.1:4000",headers:[{title:"Nombre",key:"nombre"},{title:"Apellidos",key:"apellidos"},{title:"Email",key:"email"},{title:"Teléfono",key:"telefono"},{title:"Fecha de Creación Cuenta",key:"fecha_creacion_cuenta"}],items:[],conductores:[],headersConductores:[{title:"ID",key:"id"},{title:"Usuario ID",key:"usuario_id"},{title:"Nombres",key:"nombres"},{title:"Apellidos",key:"apellidos"},{title:"DNI",key:"dni"},{title:"Estado",key:"estado"},{title:"Licencia",key:"licencia"}],pedidosAceptados:[],headersPedidos:[{title:"ID",key:"id"},{title:"Nombres",key:"nombre"},{title:"Apellidos",key:"apellidos"},{title:"Estado",key:"estado"},{title:"Fecha",key:"fecha"},{title:"Total",key:"total"}],pedidoTotal:[],headersPedidosTotal:[{title:"ID",key:"id"},{title:"Nombres",key:"nombre"},{title:"Apellidos",key:"apellidos"},{title:"Estado",key:"estado"},{title:"Fecha",key:"fecha"},{title:"Total",key:"total"},{title:"Ruta",key:"ruta_id"},{title:"Telefono",key:"telefono"}],pedidoTotalMes:[],headersPedidosTotalMes:[{title:"ID",key:"id"},{title:"Nombres",key:"nombre"},{title:"Apellidos",key:"apellidos"},{title:"Estado",key:"estado"},{title:"Fecha",key:"fecha"},{title:"Total",key:"total"},{title:"Ruta",key:"ruta_id"},{title:"Telefono",key:"telefono"}],pedidoTotalDia:[],headersPedidosTotalDia:[{title:"ID",key:"id"},{title:"Nombres",key:"nombre"},{title:"Apellidos",key:"apellidos"},{title:"Estado",key:"estado"},{title:"Fecha",key:"fecha"},{title:"Total",key:"total"},{title:"Ruta",key:"ruta_id"},{title:"Telefono",key:"telefono"}],pedidosEntregados:null,pedidosPendientes:null,isLoading:!0,pedidosEntregadosCount:0,pedidosProceso:0,pedidosPendientesCount:0}},mounted(){console.log("API URL:",this.apiUrl),this.fetchUserData(),this.fetchConductoresData(),this.fetchPedidosAceptados(),this.fetchPedidosEntregados(),this.fetchPedidosPendientes(),this.fetchPedidosEntregadosCount(),this.fetchPedidosProcesoCount(),this.fetchPedidosPendientesCount(),this.fetchPedidosEntregadosDesktop(),this.fetchPedidosEntregadosMes(),this.fetchPedidosEntregadosDia()},methods:{async fetchUserData(){try{const e=await v.A.get(`${this.apiUrl}/api/user_cliente`);this.items=e.data,console.log("Datos recibidos:",this.items)}catch(e){console.error("Error fetching user data:",e)}},async fetchPedidosEntregadosDesktop(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosDesktopEntregado`);this.pedidoTotal=e.data,console.log("Datos de pedidos entregados recibidos:",this.pedidoTotal)}catch(e){console.error("Error obteniendo datos de pedidos entregados:",e)}},async fetchPedidosEntregadosMes(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosDesktopEntregadoMes`);this.pedidoTotalMes=e.data,console.log("Datos de pedidos entregados recibidos mes:",this.pedidoTotalMes)}catch(e){console.error("Error obteniendo datos de :",e)}},async fetchPedidosEntregadosDia(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosDesktopEntregadoDia`);this.pedidoTotalDia=e.data,console.log("Datos de pedidos entregados recibidos mes:",this.pedidoTotalDia)}catch(e){console.error("Error obteniendo datos de :",e)}},async fetchConductoresData(){try{const e=await v.A.get(`${this.apiUrl}/api/user_conductores`);this.conductores=e.data,console.log("Datos de conductores recibidos:",this.conductores)}catch(e){console.error("Error obteniendo datos de conductores:",e)}},async fetchPedidosAceptados(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosDesktop`);this.pedidosAceptados=e.data.filter((e=>"en proceso"===e.estado)),console.log("Pedidos aceptados recibidos:",this.pedidosAceptados)}catch(e){console.error("Error obteniendo datos de pedidos:",e)}},async fetchPedidosEntregados(){try{this.isLoading=!0;const e=await v.A.get(`${this.apiUrl}/api/pedidosEntregados`);if(console.log("Respuesta completa de la API:",e.data),e.data&&Array.isArray(e.data)&&e.data.length>0){const{total_pedidos_entregados:o}=e.data[0];void 0!==o?(this.pedidosEntregados=parseFloat(o),console.log("Valor final de pedidosEntregados:",this.pedidosEntregados)):(console.warn("No se encontró total_pedidos_entregados en los datos"),this.pedidosEntregados=null)}else console.warn("La estructura de datos no es la esperada"),this.pedidosEntregados=null}catch(e){console.error("Error obteniendo pedidos entregados:",e),this.pedidosEntregados=null}finally{this.isLoading=!1}},async fetchPedidosPendientes(){try{this.isLoading=!0;const e=await v.A.get(`${this.apiUrl}/api/pedidosPendientes`);console.log("Respuesta completa de la API:",e.data);const{total_pedidos_entregados:o}=e.data[0];this.pedidosPendientes=parseFloat(o)}catch(e){console.error("Error obteniendo pedidos pendientes:",e),this.pedidosPendientes=null}finally{this.isLoading=!1}},formatNumber(e){return null===e||isNaN(e)?"N/A":new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},async fetchPedidosEntregadosCount(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosConteoEntregado`);console.log("Respuesta de la API:",e.data),this.pedidosEntregadosCount=parseInt(e.data[0].total_pedidos_entregados,10)}catch(e){console.error("Error al obtener pedidos entregados:",e),this.pedidosEntregadosCount=0}},async fetchPedidosProcesoCount(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosConteoProceso`);console.log("Respuesta de la API (Pedidos en Proceso):",e.data),this.pedidosProceso=parseInt(e.data[0].total_pedidos_proceso,10)}catch(e){console.error("Error al obtener pedidos en proceso:",e),this.pedidosProceso=0}},async fetchPedidosPendientesCount(){try{const e=await v.A.get(`${this.apiUrl}/api/pedidosConteoPendiente`);console.log("Respuesta de la API (Pedidos Pendientes):",e.data),this.pedidosPendientesCount=parseInt(e.data[0].total_pedidos_pendiente,10)}catch(e){console.error("Error al obtener pedidos pendientes:",e),this.pedidosPendientesCount=0}}}};const L=(0,y.A)(A,[["render",D],["__scopeId","data-v-e91a0e66"]]);var R=L;const $=["href"],I={class:"text-truncate",style:{"max-width":"200px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},U=["href"],S={style:{width:"180px",display:"flex","justify-content":"space-evenly"}},K=["href"],W={class:"text-truncate",style:{"max-width":"200px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},T=["href"],N={style:{width:"180px",display:"flex","justify-content":"space-evenly"}},O={key:0,class:"mt-4 text-subtitle-1"};function j(e,o,t,l,i,d){const r=(0,s.g2)("v-col"),n=(0,s.g2)("v-row"),u=(0,s.g2)("v-text-field"),p=(0,s.g2)("v-card-title"),m=(0,s.g2)("v-chip"),b=(0,s.g2)("v-icon"),g=(0,s.g2)("v-data-table"),f=(0,s.g2)("v-card"),k=(0,s.g2)("v-date-picker"),v=(0,s.g2)("v-menu"),h=(0,s.g2)("v-select"),_=(0,s.g2)("v-textarea"),y=(0,s.g2)("v-container"),F=(0,s.g2)("v-card-text"),w=(0,s.g2)("v-spacer"),P=(0,s.g2)("v-btn"),C=(0,s.g2)("v-card-actions"),E=(0,s.g2)("v-dialog"),x=(0,s.g2)("v-img"),V=(0,s.g2)("v-card-subtitle"),D=(0,s.g2)("v-slide-group-item"),A=(0,s.g2)("v-slide-group"),L=(0,s.g2)("v-progress-circular"),R=(0,s.g2)("v-stepper"),j=(0,s.g2)("v-form");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[46]||(o[46]=[(0,s.Lk)("p",{style:{"margin-left":"20px"}},"Gestión De Pedidos Pendientes",-1)]))),_:1}),(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[47]||(o[47]=[(0,s.Lk)("p",{style:{"margin-left":"20px"}},"Gestión De Pedidos En Proceso",-1)]))),_:1}),(0,s.bF)(r,{cols:"4",class:"alineartexto"},{default:(0,s.k6)((()=>o[48]||(o[48]=[(0,s.Lk)("p",{style:{"margin-left":"20px"}},"Clientes Beneficiados",-1)]))),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.search,"onUpdate:modelValue":o[0]||(o[0]=e=>l.search=e),label:"Buscar Pendientes","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(g,{headers:l.headers,items:l.pedidos,"show-expand":"","single-expand":"",search:l.search,"items-per-page":3,class:"custom-table"},{item:(0,s.k6)((({item:e})=>[(0,s.Lk)("tr",{class:(0,c.C4)({"highlight-row":e.beneficiado_nombre&&e.beneficiado_apellidos})},[(0,s.Lk)("td",null,(0,c.v_)(e.id),1),(0,s.Lk)("td",null,(0,c.v_)(e.nombre),1),(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:l.getWhatsAppLink(e.telefono),target:"_blank"},(0,c.v_)(e.telefono),9,$)]),(0,s.Lk)("td",null,[(0,s.Lk)("div",I,[(0,s.Lk)("a",{href:l.getGoogleMapsLink(e.direccion),target:"_blank"},(0,c.v_)(e.direccion),9,U)])]),(0,s.Lk)("td",null,(0,c.v_)(e.total),1),(0,s.Lk)("td",null,[(0,s.bF)(m,{color:l.getEstadoColor(e.estado)},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(e.estado),1)])),_:2},1032,["color"])]),(0,s.Lk)("td",null,(0,c.v_)(e.fecha),1),(0,s.Lk)("td",null,(0,c.v_)(e.beneficiado_nombre),1),(0,s.Lk)("td",null,(0,c.v_)(e.beneficiado_apellidos),1),(0,s.Lk)("td",S,[(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.viewOrder(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[49]||(o[49]=[(0,s.eW)(" mdi-eye ")]))),_:2},1032,["onClick"]),(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.openEditDialog(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[50]||(o[50]=[(0,s.eW)("mdi-pencil")]))),_:2},1032,["onClick"]),(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.deleteItem(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[51]||(o[51]=[(0,s.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])],2)])),_:1},8,["headers","items","search"])])),_:1})])),_:1}),(0,s.bF)(E,{modelValue:l.dialogoVisible,"onUpdate:modelValue":o[8]||(o[8]=e=>l.dialogoVisible=e),"max-width":"500px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>o[52]||(o[52]=[(0,s.Lk)("span",{class:"text-h5"},"Editar Pedido",-1)]))),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.pedidoEditado.total,"onUpdate:modelValue":o[1]||(o[1]=e=>l.pedidoEditado.total=e),label:"Total",type:"number",prefix:"S/."},null,8,["modelValue"])])),_:1}),(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{modelValue:e.menuFecha,"onUpdate:modelValue":o[5]||(o[5]=o=>e.menuFecha=o),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:(0,s.k6)((({on:e,props:t})=>[(0,s.bF)(u,(0,s.v6)({modelValue:l.pedidoEditado.fecha,"onUpdate:modelValue":o[2]||(o[2]=e=>l.pedidoEditado.fecha=e),label:"Fecha del Pedido","prepend-icon":"mdi-calendar"},t,(0,s.Tb)(e)),null,16,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(k,{modelValue:l.pedidoEditado.fecha,"onUpdate:modelValue":o[3]||(o[3]=e=>l.pedidoEditado.fecha=e),onInput:o[4]||(o[4]=o=>e.menuFecha=!1),max:(new Date).toISOString().substr(0,10),year:!0,month:!0},null,8,["modelValue","max"])])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{modelValue:l.pedidoEditado.estado,"onUpdate:modelValue":o[6]||(o[6]=e=>l.pedidoEditado.estado=e),items:l.estadosDisponibles,label:"Estado",required:""},null,8,["modelValue","items"])])),_:1}),(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:l.pedidoEditado.observacion,"onUpdate:modelValue":o[7]||(o[7]=e=>l.pedidoEditado.observacion=e),label:"Observación",rows:"3"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(w),(0,s.bF)(P,{color:"error",text:"",onClick:l.cerrarDialogo},{default:(0,s.k6)((()=>o[53]||(o[53]=[(0,s.eW)(" Cancelar ")]))),_:1},8,["onClick"]),(0,s.bF)(P,{color:"success",text:"",onClick:l.guardarCambios},{default:(0,s.k6)((()=>o[54]||(o[54]=[(0,s.eW)(" Guardar ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:l.orderDialog,"onUpdate:modelValue":o[10]||(o[10]=e=>l.orderDialog=e),"max-width":"600px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.eW)("Detalles del Pedido #"+(0,c.v_)(l.selectedOrder?.id),1)])),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,"Dirección: "+(0,c.v_)(l.selectedOrder?.direccion),1),(0,s.Lk)("div",null,"Total: "+(0,c.v_)(l.selectedOrder?.total),1),o[55]||(o[55]=(0,s.Lk)("div",null,"Productos:",-1)),(0,s.Lk)("pre",null,(0,c.v_)(l.productosYCantidadesPorPedido[l.selectedOrder?.id]),1)])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(P,{color:"primary",text:"",onClick:o[9]||(o[9]=e=>l.orderDialog=!1)},{default:(0,s.k6)((()=>o[56]||(o[56]=[(0,s.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:l.deleteDialog,"onUpdate:modelValue":o[12]||(o[12]=e=>l.deleteDialog=e),persistent:"","max-width":"500px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>o[57]||(o[57]=[(0,s.Lk)("span",{class:"text-h5"},"Eliminar Pedido",-1)]))),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>o[58]||(o[58]=[(0,s.Lk)("p",null,"¿Está seguro que desea eliminar este pedido?",-1)]))),_:1}),(0,s.bF)(r,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:l.motivoEliminacion,"onUpdate:modelValue":o[11]||(o[11]=e=>l.motivoEliminacion=e),label:"Observación",rows:"3",required:"",rules:[e=>!!e||"La observación es requerida"]},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(w),(0,s.bF)(P,{color:"error",text:"",onClick:l.cerrarDialogoEliminar},{default:(0,s.k6)((()=>o[59]||(o[59]=[(0,s.eW)(" Cancelar ")]))),_:1},8,["onClick"]),(0,s.bF)(P,{color:"success",text:"",onClick:l.confirmarEliminacion,disabled:!l.motivoEliminacion},{default:(0,s.k6)((()=>o[60]||(o[60]=[(0,s.eW)(" Eliminar ")]))),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.searchPedido,"onUpdate:modelValue":o[13]||(o[13]=e=>l.searchPedido=e),label:"Buscar En Proceso","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(g,{headers:l.pedidoHeaders,items:l.pedidosproc,search:l.searchPedido,"items-per-page":3,"sort-by":[{key:"id",order:"desc"}]},{item:(0,s.k6)((({item:e})=>[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,c.v_)(e.id),1),(0,s.Lk)("td",null,(0,c.v_)(e.nombre),1),(0,s.Lk)("td",null,(0,c.v_)(e.apellidos),1),(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:l.getWhatsAppLink(e.telefono),target:"_blank"},(0,c.v_)(e.telefono),9,K)]),(0,s.Lk)("td",null,(0,c.v_)(e.total),1),(0,s.Lk)("td",null,(0,c.v_)(e.ruta_id),1),(0,s.Lk)("td",null,(0,c.v_)(e.fecha),1),(0,s.Lk)("td",null,(0,c.v_)(e.estado),1),(0,s.Lk)("td",null,(0,c.v_)(e.tipo),1),(0,s.Lk)("td",null,[(0,s.Lk)("div",W,[(0,s.Lk)("a",{href:l.getGoogleMapsLink(e.direccion),target:"_blank"},(0,c.v_)(e.direccion),9,T)])]),(0,s.Lk)("td",null,(0,c.v_)(e.distrito),1),(0,s.Lk)("td",N,[(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.viewOrder(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[61]||(o[61]=[(0,s.eW)(" mdi-eye ")]))),_:2},1032,["onClick"]),(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.openEditDialog(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[62]||(o[62]=[(0,s.eW)("mdi-pencil")]))),_:2},1032,["onClick"]),(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.deleteItem(e),style:{"font-size":"1.3rem","margin-top":"15px"}},{default:(0,s.k6)((()=>o[63]||(o[63]=[(0,s.eW)(" mdi-delete ")]))),_:2},1032,["onClick"])])])])),_:1},8,["headers","items","search"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.searchClient,"onUpdate:modelValue":o[14]||(o[14]=e=>l.searchClient=e),label:"Buscar Cliente","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])),_:1}),(0,s.bF)(g,{headers:l.clienteHeaders,items:l.clientes,search:l.searchClient,"items-per-page":5},{item:(0,s.k6)((({item:e})=>[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,c.v_)(e.id),1),(0,s.Lk)("td",null,(0,c.v_)(e.nombre),1),(0,s.Lk)("td",null,(0,c.v_)(e.apellidos),1),(0,s.Lk)("td",null,(0,c.v_)(e.telefono),1),(0,s.Lk)("td",null,(0,c.v_)(e.saldo_beneficios),1),(0,s.Lk)("td",null,[(0,s.bF)(m,{color:e.quiereretirar?"green":"red"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(e.quiereretirar?"Sí":"No"),1)])),_:2},1032,["color"])]),(0,s.Lk)("td",null,(0,c.v_)(e.banco_retiro),1),(0,s.Lk)("td",null,(0,c.v_)(e.numero_cuenta),1),(0,s.Lk)("td",null,[(0,s.bF)(b,{small:"",class:"mr-2",onClick:o=>l.editClient(e)},{default:(0,s.k6)((()=>o[64]||(o[64]=[(0,s.eW)("mdi-pencil")]))),_:2},1032,["onClick"])])])])),_:1},8,["headers","items","search"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"12",md:"12",lg:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(R,{modelValue:l.activeStep,"onUpdate:modelValue":o[33]||(o[33]=e=>l.activeStep=e),items:["Cliente - Ubicación","Productos",""]},{["item.1"]:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(r,{cols:"3"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{elevation:"5",class:"mb-3 pa-2"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"alineartexto"},{default:(0,s.k6)((()=>o[65]||(o[65]=[(0,s.eW)(" Cliente ")]))),_:1}),(0,s.bF)(u,{modelValue:l.formData.nombre,"onUpdate:modelValue":o[15]||(o[15]=e=>l.formData.nombre=e),label:"Nombre"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.formData.apellidos,"onUpdate:modelValue":o[16]||(o[16]=e=>l.formData.apellidos=e),label:"Apellidos"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.formData.telefono,"onUpdate:modelValue":o[17]||(o[17]=e=>l.formData.telefono=e),label:"Teléfono"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.formData.direccion,"onUpdate:modelValue":o[18]||(o[18]=e=>l.formData.direccion=e),label:"Dirección"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.formData.distrito,"onUpdate:modelValue":o[19]||(o[19]=e=>l.formData.distrito=e),label:"Distrito"},null,8,["modelValue"]),(0,s.bF)(n,{class:"pa-3"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.formData.latitud,"onUpdate:modelValue":o[20]||(o[20]=e=>l.formData.latitud=e),label:"Latitud"},null,8,["modelValue"]),(0,s.bF)(w),(0,s.bF)(u,{modelValue:l.formData.longitud,"onUpdate:modelValue":o[21]||(o[21]=e=>l.formData.longitud=e),label:"Longitud"},null,8,["modelValue"])])),_:1}),(0,s.bF)(u,{modelValue:l.formData.fechaPedido,"onUpdate:modelValue":o[22]||(o[22]=e=>l.formData.fechaPedido=e),label:"Fecha de pedido"},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.bF)(r,{cols:"9"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{elevation:"5",style:{"background-color":"bisque"}},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"alineartexto"},{default:(0,s.k6)((()=>o[66]||(o[66]=[(0,s.eW)("Mapa")]))),_:1}),(0,s.bF)(u,{modelValue:l.searchQuery,"onUpdate:modelValue":o[23]||(o[23]=e=>l.searchQuery=e),label:"Busqueda","prepend-inner-icon":"mdi-magnify",onKeyup:(0,a.jR)(l.searchLocation,["enter"])},null,8,["modelValue","onKeyup"]),o[67]||(o[67]=(0,s.Lk)("div",{id:"map",style:{height:"400px"}},null,-1))])),_:1})])),_:1})])),_:1})])),["item.2"]:(0,s.k6)((()=>[(0,s.bF)(f,{elevation:"6"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)([l.productos,l.promos],((e,t)=>((0,s.uX)(),(0,s.Wv)(n,{class:"mb-5",key:t},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(A,{modelValue:l.model,"onUpdate:modelValue":o[24]||(o[24]=e=>l.model=e),class:"pa-4","selected-class":"bg-success","show-arrows":""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.Wv)(D,{key:e.id},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"mx-auto mb-5 ml-5 pa-3","max-width":"400","min-width":"300"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{class:"align-end text-white",height:"200",src:e.foto,cover:""},null,8,["src"]),(0,s.bF)(V,{class:"pt-4"},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(e.nombre),1)])),_:2},1024),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,"S/. "+(0,c.v_)(e.precio.toFixed(2)),1),(0,s.Lk)("div",null,(0,c.v_)(e.descripcion),1)])),_:2},1024),(0,s.bF)(C,{class:"d-flex justify-center"},{default:(0,s.k6)((()=>[(0,s.bF)(P,{icon:"mdi-plus",onClick:o=>l.incrementQuantity(e)},null,8,["onClick"]),(0,s.Lk)("p",null,(0,c.v_)(e.cantidad||0),1),(0,s.bF)(P,{icon:"mdi-minus",onClick:o=>l.decrementQuantity(e)},null,8,["onClick"])])),_:2},1024),(0,s.bF)(u,{modelValue:e.descuento,"onUpdate:modelValue":o=>e.descuento=o,label:"S/. Descuento",prefix:"S/."},null,8,["modelValue","onUpdate:modelValue"]),(0,s.bF)(P,{onClick:o=>l.confirmarItem(e)},{default:(0,s.k6)((()=>o[68]||(o[68]=[(0,s.eW)("Confirmar")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["modelValue"])])),_:2},1024),(0,s.bF)(E,{modelValue:l.dialog,"onUpdate:modelValue":o[28]||(o[28]=e=>l.dialog=e),width:"auto"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{"min-width":"400","prepend-icon":"mdi-account"},{actions:(0,s.k6)((()=>[(0,s.bF)(P,{class:"ms-auto",text:"Ok",onClick:o[27]||(o[27]=e=>l.dialog=!1)})])),default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.autorizadoPor,"onUpdate:modelValue":o[25]||(o[25]=e=>l.autorizadoPor=e),label:"Autorizado por:"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.cargo,"onUpdate:modelValue":o[26]||(o[26]=e=>l.cargo=e),label:"Cargo:"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:2},1024)))),128))])),_:1})])),prev:(0,s.k6)((()=>[(0,s.bF)(P,{text:"",onClick:l.prevs},{default:(0,s.k6)((()=>o[69]||(o[69]=[(0,s.eW)("Anterior")]))),_:1},8,["onClick"])])),next:(0,s.k6)((()=>[(0,s.bF)(P,{text:"",onClick:l.nexts},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(2===l.activeStep?"REGISTRAR PEDIDO":"Siguiente"),1)])),_:1},8,["onClick"])])),default:(0,s.k6)((()=>[(0,s.bF)(E,{modelValue:e.CircularProgress,"onUpdate:modelValue":o[29]||(o[29]=o=>e.CircularProgress=o)},{default:(0,s.k6)((()=>[(0,s.bF)(L,{color:"red",indeterminate:""})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:l.mostrarModalTipoPedido,"onUpdate:modelValue":o[31]||(o[31]=e=>l.mostrarModalTipoPedido=e),"max-width":"400px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"text-h5"},{default:(0,s.k6)((()=>o[70]||(o[70]=[(0,s.eW)(" Seleccione el tipo de pedido ")]))),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[o[71]||(o[71]=(0,s.Lk)("p",{class:"mb-4"},"Por favor, seleccione el tipo de pedido que desea realizar:",-1)),(0,s.bF)(h,{modelValue:l.tipoPedidoSeleccionado,"onUpdate:modelValue":o[30]||(o[30]=e=>l.tipoPedidoSeleccionado=e),items:l.tiposPedido,"item-title":"text","item-value":"value",label:"Tipo de Pedido",required:""},null,8,["modelValue","items"]),"express"===l.tipoPedidoSeleccionado?((0,s.uX)(),(0,s.CE)("div",O," Se aplicará un cargo adicional de S/.4.00 por servicio express ")):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(w),(0,s.bF)(P,{color:"error",variant:"text",onClick:l.cerrarModal},{default:(0,s.k6)((()=>o[72]||(o[72]=[(0,s.eW)(" Cancelar ")]))),_:1},8,["onClick"]),(0,s.bF)(P,{color:"primary",variant:"text",onClick:l.procesarPedido,disabled:!l.tipoPedidoSeleccionado},{default:(0,s.k6)((()=>o[73]||(o[73]=[(0,s.eW)(" Confirmar ")]))),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:l.dialogCircular,"onUpdate:modelValue":o[32]||(o[32]=e=>l.dialogCircular=e),"max-width":"400"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"text-h5"},{default:(0,s.k6)((()=>o[74]||(o[74]=[(0,s.eW)(" Cargando... ")]))),_:1}),(0,s.bF)(F,{class:"d-flex justify-center"},{default:(0,s.k6)((()=>[(0,s.bF)(L,{indeterminate:"",color:"primary"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:2},1032,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(E,{modelValue:l.dialogSaldo,"onUpdate:modelValue":o[41]||(o[41]=e=>l.dialogSaldo=e),"max-width":"500px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>o[75]||(o[75]=[(0,s.Lk)("span",{class:"headline"},"Confirmación de Transferencia",-1)]))),_:1}),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.Lk)("p",null,(0,c.v_)(l.dialogMessage),1),(0,s.bF)(j,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.editedItem.nombre,"onUpdate:modelValue":o[34]||(o[34]=e=>l.editedItem.nombre=e),label:"Nombre",readonly:""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.editedItem.apellidos,"onUpdate:modelValue":o[35]||(o[35]=e=>l.editedItem.apellidos=e),label:"Apellidos",readonly:""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.editedItem.telefono,"onUpdate:modelValue":o[36]||(o[36]=e=>l.editedItem.telefono=e),label:"Teléfono",readonly:""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.editedItem.saldo_beneficios,"onUpdate:modelValue":o[37]||(o[37]=e=>l.editedItem.saldo_beneficios=e),label:"Saldo Beneficios",type:"number",readonly:""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.editedItem.banco_retiro,"onUpdate:modelValue":o[38]||(o[38]=e=>l.editedItem.banco_retiro=e),label:"Banco de Retiro",readonly:""},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.editedItem.numero_cuenta,"onUpdate:modelValue":o[39]||(o[39]=e=>l.editedItem.numero_cuenta=e),label:"Número de Cuenta",readonly:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(P,{color:"blue",text:"",onClick:o[40]||(o[40]=e=>l.dialogSaldo=!1)},{default:(0,s.k6)((()=>o[76]||(o[76]=[(0,s.eW)("Salir")]))),_:1}),(0,s.bF)(P,{color:"blue darken-1",text:"",onClick:l.updateClient},{default:(0,s.k6)((()=>o[77]||(o[77]=[(0,s.eW)("Aceptar")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:e.dialogDelete,"onUpdate:modelValue":o[42]||(o[42]=o=>e.dialogDelete=o),"max-width":"500px"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>o[78]||(o[78]=[(0,s.eW)("¿Está seguro de que desea eliminar este pedido?")]))),_:1}),(0,s.bF)(C,null,{default:(0,s.k6)((()=>[(0,s.bF)(w),(0,s.bF)(P,{color:"blue darken-1",text:"",onClick:e.closeDelete},{default:(0,s.k6)((()=>o[79]||(o[79]=[(0,s.eW)("Cancelar")]))),_:1},8,["onClick"]),(0,s.bF)(P,{color:"blue darken-1",text:"",onClick:e.deleteItemConfirm},{default:(0,s.k6)((()=>o[80]||(o[80]=[(0,s.eW)("OK")]))),_:1},8,["onClick"]),(0,s.bF)(w)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(E,{modelValue:l.dialogConfirm,"onUpdate:modelValue":o[45]||(o[45]=e=>l.dialogConfirm=e),width:"auto"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{"min-width":"400","prepend-icon":"mdi-account"},{actions:(0,s.k6)((()=>[(0,s.bF)(P,{class:"ms-auto",text:"Ok",onClick:e.confirmProductDiscount},null,8,["onClick"])])),default:(0,s.k6)((()=>[(0,s.bF)(u,{modelValue:l.confirmData.autorizado,"onUpdate:modelValue":o[43]||(o[43]=e=>l.confirmData.autorizado=e),label:"Autorizado por:"},null,8,["modelValue"]),(0,s.bF)(u,{modelValue:l.confirmData.cargo,"onUpdate:modelValue":o[44]||(o[44]=e=>l.confirmData.cargo=e),label:"Cargo:"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])}var M=t(144),z=(t(2488),t(850)),q=t(8699),X=t(6140),B=t(1209),G=t(8075),Q=t(856),H=t(8225),Y=t(1242),Z=t(9073),J=t(6505),ee=t(2375),oe={name:"Gestion",setup(){const e=(0,M.KR)(5),o=((0,M.KR)(null),(0,M.KR)(!1)),t=(0,M.KR)(null),a=(0,M.KR)(null),l=(0,M.KR)(1),i=((0,M.KR)(-1),(0,M.KR)("")),d=(0,M.KR)(""),r=(0,M.KR)({}),n=(0,M.KR)({id:null,total:"",fecha:"",estado:"",observacion:""}),c=((0,M.KR)(!1),(0,M.KR)([])),u=(0,M.KR)([]),p=((0,M.KR)(1),(0,M.KR)(!1),(0,M.KR)(!1)),m=(0,M.KR)(null),b=(0,M.KR)(null),g=(0,M.KR)([]),f=(0,M.KR)([]),k=(0,M.KR)("http://127.0.0.1:4000"),h="/api",_="/detallepedidopromo/",y=(0,M.KR)([]),F=(0,M.KR)([]),w=(0,M.KR)([]),P=(0,M.KR)([]),C=(0,M.KR)(0),E=(0,M.KR)(0),x=(0,M.KR)(""),V=(0,M.KR)(null),D=(0,M.KR)(null),A=(0,M.KR)("normal"),L=(0,M.KR)("pendiente"),R=(0,M.KR)(!1),$=(0,M.KR)(!1),I=(0,M.KR)(0),U=(0,M.KR)(""),S=(0,M.KR)(!1),K=(0,M.KR)(!1),W=(0,M.KR)(""),T=(0,M.KR)(null),N=(0,M.KR)(""),O=(0,M.KR)(""),j=(0,M.KR)(null),oe=(0,M.KR)(!1),te=(0,M.KR)(null),ae=(0,M.KR)({}),le=(0,M.KR)(!1),ie=()=>{le.value=!0,setTimeout((()=>{le.value=!1}),1500)},de=()=>{le.value=!1},re=[{text:"Normal (+ S/.0.00)",value:"normal"},{text:"Express (+ S/.4.00)",value:"express"}],ne=["pendiente","en proceso","anulado"],se=async e=>{te.value=e,await ce(e.id),oe.value=!0},ce=async e=>{if(e)try{const o=await v.A.get(`${k.value}${h}${_}${e}`),t=o.data.map((e=>({pedidoID:e.pedido_id,productoNombre:e.nombre_prod,cantidadProd:e.cantidad,promocionID:e.promocion_id,nombrePromo:e.nombre_promocion})));console.log("---------------\x3e DETALLES PEDIDOS<--------------------"),console.log(t);let a=t.map((e=>e.promocionID&&e.nombrePromo?`${ue(e.nombrePromo)} x ${e.cantidadProd} uds.`:`${ue(e.productoNombre)} x ${e.cantidadProd} uds.`)).join("\n");ae.value[e]=a}catch(o){console.error("Error al cargar los detalles del pedido:",o),alert("Error al cargar los detalles del pedido")}},ue=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",pe=e=>{n.value={id:e.id,total:e.total,fecha:e.fecha,estado:e.estado,observacion:e.observacion||""},S.value=!0},me=()=>{S.value=!1,n.value={}},be=async()=>{try{const e=n.value.id,o={totalpago:parseFloat(n.value.total),fechaped:n.value.fecha,estadoped:n.value.estado,observacion:n.value.observacion||"NA"},t=await v.A.put(`${k.value}/api/pedidoModificado/${e}`,o,{headers:{"Content-Type":"application/json"}});200===t.status&&(console.log("Pedido actualizado correctamente"),await Xe(),await Be(),me())}catch(e){console.error("Error al actualizar pedido:",e),alert("Error al actualizar el pedido")}},ge=e=>{console.log("Abriendo diálogo para:",e),T.value=e,W.value="",K.value=!0},fe=()=>{console.log("Cerrando diálogo"),K.value=!1,T.value=null,W.value=""},ke=async(e,o)=>{try{const t=await v.A.delete(`${k.value}/api/revertirpedidocan/${e}`,{headers:{"Content-Type":"application/json"},data:{motivoped:o}});200===t.status&&(console.log("Pedido eliminado correctamente"),await Xe(),await Be())}catch(t){console.error("Error al eliminar pedido:",t),alert("Error al eliminar el pedido")}},ve=async()=>{try{T.value&&W.value&&(await ke(T.value.id,W.value),fe())}catch(e){console.error("Error al eliminar el pedido:",e),alert("Error al eliminar el pedido")}},he=()=>{I.value=E.value,$.value=!0},_e=[{title:"ID",key:"id",align:"center",cellAlign:"center"},{title:"Nombre",key:"nombre",align:"center",cellAlign:"center"},{title:"Teléfono",key:"telefono",align:"center",cellAlign:"center"},{title:"Dirección",key:"direccion",align:"center",cellAlign:"center"},{title:"Total",key:"total",align:"center",cellAlign:"center"},{title:"Estado",key:"estado",align:"center",cellAlign:"center"},{title:"Fecha",key:"fecha",align:"center",cellAlign:"center"},{title:"Beneficiado Nombre",key:"beneficiado_nombre",align:"center",cellAlign:"center"},{title:"Beneficiado Apellido",key:"beneficiado_apellidos",align:"center",cellAlign:"center"},{title:"Acciones",key:"actions",align:"center",cellAlign:"center",sortable:!1}],ye=(0,M.KR)([{title:"ID",key:"id",align:"center",cellAlign:"center",sortable:!0},{title:"Nombre",key:"nombre",align:"center",cellAlign:"center",sortable:!0},{title:"Apellidos",key:"apellidos",align:"center",cellAlign:"center",sortable:!0},{title:"Teléfono",key:"telefono",align:"center",cellAlign:"center",sortable:!0},{title:"Saldo Beneficios",key:"saldo_beneficios",align:"center",cellAlign:"center",sortable:!0},{title:"¿Retirar?",key:"quiereretirar",align:"center",cellAlign:"center",sortable:!0},{title:"Banco de Retiro",key:"banco_retiro",align:"center",cellAlign:"center",sortable:!0},{title:"Número de Cuenta",key:"numero_cuenta",align:"center",cellAlign:"center",sortable:!0},{title:"Acciones",key:"actions",align:"center",cellAlign:"center",sortable:!1}]),Fe=(0,M.KR)([]),we=(0,M.KR)(""),Pe=(0,M.KR)(""),Ce=(0,M.KR)([{title:"ID",key:"id",align:"center",cellAlign:"center",sortable:!0},{title:"Nombre",key:"nombre",align:"center",cellAlign:"center",sortable:!0},{title:"Apellidos",key:"apellidos",align:"center",cellAlign:"center",sortable:!0},{title:"Teléfono",key:"telefono",align:"center",cellAlign:"center",sortable:!0},{title:"Total",key:"total",align:"center",cellAlign:"center",sortable:!0},{title:"Ruta",key:"ruta_id",align:"center",cellAlign:"center",sortable:!0},{title:"Fecha",key:"fecha",align:"center",cellAlign:"center",sortable:!0},{title:"Estado",key:"estado",align:"center",cellAlign:"center",sortable:!0},{title:"Tipo",key:"tipo",align:"center",cellAlign:"center",sortable:!1},{title:"Dirección",key:"direccion",align:"center",cellAlign:"center",sortable:!1},{title:"Distrito",key:"distrito",align:"center",cellAlign:"center",sortable:!1},{title:"Acciones",key:"actions",align:"center",cellAlign:"center",sortable:!1}]),Ee=[],xe=((0,M.KR)([]),(0,M.Kh)({nombre:"",apellidos:"",telefono:"",direccion:"",distrito:"",latitud:"",longitud:"",email:"",ruc:"",fechaPedido:(new Date).toISOString().slice(0,10)})),Ve=(0,M.Kh)({autorizado:"",cargo:""}),De=e=>e?`${k.value}/images/${encodeURIComponent(e)}`:"https://via.placeholder.com/150?text=No+Image",Ae=async()=>{try{const e=await v.A.get(`${k.value}${h}/products`);g.value=e.data.map((e=>({...e,foto:De(e.foto),cantidad:0,descuento:0})))}catch(e){console.error("Error fetching products:",e)}},Le=async()=>{try{const e=await v.A.get(`${k.value}${h}/promocion`);f.value=e.data.map((e=>({...e,foto:De(e.foto),cantidad:0,descuento:0})))}catch(e){console.error("Error fetching promos:",e)}},Re=async(e,o,t,a,l,i)=>{try{const d=await v.A.get(`${k.value}${h}/productsbypromo/${l}`),r=d.data.map((d=>({id:d.producto_id,precio:parseFloat(i),nombre:o,descripcion:t,descuento:parseFloat(a),cantidad:parseInt(e),observacion:`Promoción: ${o}`,promocion_id:l})));w.value.push(...r)}catch(d){throw console.error("Error al obtener productos de promoción:",d),d}},$e=async()=>{try{console.log("CREANDO CLIENTE NR------------------\x3e"),console.log(`${k.value}${h}/clienteNR`);const o=await v.A.post(`${k.value}${h}/clienteNR`,{empleado_id:e.value,nombre:xe.nombre,apellidos:xe.apellidos,direccion:xe.direccion,telefono:xe.telefono,email:xe.email,distrito:xe.distrito,latitud:xe.latitud,longitud:xe.longitud,ruc:xe.ruc});return o.data}catch(o){throw console.error("Error al crear cliente:",o),o}},Ie=async(e,o)=>{try{const t=await v.A.put(`${k.value}${h}/updateZonaTrabajo/${e}/${o}`,{},{headers:{"Content-type":"application/json"}});return t.data}catch(t){throw console.error("Error updating location relation:",t),t}},Ue=async e=>{try{if(console.log("Iniciando creación de detalles de pedido"),!e)throw new Error("ID de cliente no proporcionado");const t=[...w.value],a=[];while(t.length>0){const l=t.shift();try{console.log("Creando detalle para producto:",l),console.log("Creando detalle para producto:",l.cantidad),console.log("Creando detalle para producto POSIBLE ERROR"),console.log("Creando detalle para producto:",l.promoID),console.log("Creando detalle para producto:",l.promocion_id),console.log("Creando detalle para producto:",l.id),console.log("Creando detalle para producto:",e);const o=await v.A.post(`${k.value}${h}/detallepedido`,{cliente_nr_id:e,producto_id:l.id,cantidad:l.cantidadInt||l.cantidad,promocion_id:l.promoID||l.promocion_id},{headers:{"Content-type":"application/json"}});if(200!==o.status)throw console.error("Error en la respuesta del servidor:",o.status),console.error("Detalles de la respuesta:",o.data),new Error(`Error del servidor: ${o.status}`);console.log("Detalle creado exitosamente:",o.data),a.push(o.data)}catch(o){console.error("Error al crear detalle individual:",{producto:l,error:o.message}),t.push(l)}}return console.log("Todos los detalles fueron creados exitosamente"),a}catch(o){throw console.error("Error en createOrderDetails:",o.message),new Error(`Error al crear detalles del pedido: ${o.message}`)}},Se=async e=>{try{const o=await v.A.get(`${k.value}${h}/last_clientenr/${e}`);if(200===o.status&&o.data.length>0)return V.value=o.data[0].id,V.value;throw new Error("No se encontró un cliente no registrado.")}catch(o){throw console.error("Error al obtener el último cliente no registrado:",o),o}},Ke=async(e,o)=>{try{const t=await v.A.get(`${k.value}${h}/pedido_clientenr/${e}`);if(200===t.status&&t.data)return D.value=t.data.id,await We(o,D.value),D.value;throw new Error("No se encontró una ubicación para el cliente no registrado.")}catch(t){throw console.error("Error al obtener la última ubicación:",t),t}},We=async(e,o)=>{try{await v.A.put(`${k.value}${h}/updateZonaTrabajo/${e}/${o}`)}catch(t){throw console.error("Error al actualizar la relación de ubicación:",t),t}},Te=async()=>{try{await qe();const o=await $e();V.value=o.id,await Se(e.value),await Ke(V.value,e.value);const t=new Date(xe.fechaPedido),a=t.toISOString().split("T")[0];if(!V.value)throw new Error("ID de cliente no disponible");if(!D.value)throw new Error("ID de ubicación no disponible");if(void 0===E.value||isNaN(E.value))throw new Error("Monto total inválido");const i={cliente_nr_id:parseInt(V.value),subtotal:parseFloat((E.value+C.value).toFixed(2)),descuento:parseFloat(C.value.toFixed(2)),total:parseFloat(E.value.toFixed(2)),fecha:a,tipo:A.value||"normal",estado:L.value||"pendiente",observacion:x.value||"",ubicacion_id:parseInt(D.value)};console.log("Datos del pedido a enviar:",i);await v.A.post(`${k.value}${h}/pedido`,i);const d=await Ue(V.value);if(d.length===w.value.length)return Ne(),Oe(),de(),alert("¡Pedido registrado exitosamente!"),await Xe(),await Be(),l.value=1,!0;throw new Error("No se pudieron crear todos los detalles del pedido")}catch(o){throw console.error("Error al crear pedido:",o),de(),alert(`Error al registrar el pedido: ${o.message}`),o}},Ne=()=>{Object.keys(xe).forEach((e=>{xe[e]=""})),xe.fechaPedido=(new Date).toISOString().slice(0,10),w.value=[],E.value=0,C.value=0,x.value=""},Oe=()=>{g.value.forEach((e=>{e.cantidad=0,e.descuento=0})),f.value.forEach((e=>{e.cantidad=0,e.descuento=0})),t.value=null},je=e=>{e.cantidad++},Me=e=>{e.cantidad>0&&e.cantidad--},ze=e=>{e.descuento>0&&(e.autorizacion={autorizadoPor:N.value,cargo:O.value,fecha:(new Date).toISOString()}),o.value=!0,qe()},qe=async()=>{y.value=[],F.value=[],w.value=[],P.value=[],C.value=0,E.value=0;const e="express"===j.value?4:0;[...g.value,...f.value].forEach((e=>{e.cantidad>0&&(y.value.push(e),Object.prototype.hasOwnProperty.call(e,"fecha_inicio")?F.value.push(e):w.value.push({...e,precio:parseFloat(e.precio),descuento:parseFloat(e.descuento||0),cantidad:parseInt(e.cantidad)}))}));for(const t of F.value)await Re(t.cantidad,t.nombre,t.descripcion,t.descuento,t.id,t.precio);let o=0;C.value=0,w.value.forEach((e=>{const t=parseFloat(e.precio)||0,a=parseInt(e.cantidad)||0,l=parseFloat(e.descuento)||0;o+=t*a,C.value+=l*a,l>0&&P.value.push({...e,precioConDescuento:t-l})})),E.value=o-C.value+e,x.value=P.value.map((e=>{if(!e.observacion&&!e.descuento)return null;const o=e.descuento>0?` (Descuento: S/ ${(parseFloat(e.descuento)*parseInt(e.cantidad)).toFixed(2)})`:"";return e.descuento>0?`${e.nombre||""}: ${e.observacion||""}${o}\nAutorizado por: ${N.value}\nCargo: ${O.value}`:e.observacion})).filter(Boolean).join("\n\n"),e>0&&(x.value+=`\nEnvío Express: S/ ${e.toFixed(2)}`)};(0,s.sV)((()=>{Xe(),Qe(),Ae(),Le(),Ge(),Be()}));const Xe=async()=>{try{const e=await v.A.get(`${k.value}/api/pedidosPendientesTotales`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.data)throw new Error("No se recibieron datos");c.value=e.data,console.log("Pedidos cargados:",c.value)}catch(e){console.error("Error en fetchPedidos:",e)}},Be=async()=>{try{const e=await v.A.get(`${k.value}/api/pedidosDesktop`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.data)throw new Error("No se recibieron datos");u.value=e.data,console.log("Pedidos cargados:",u.value)}catch(e){console.error("Error en fetchProceso:",e)}},Ge=async()=>{try{const e=await v.A.get(`${k.value}/api/user_cliente_saldo`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.data)throw new Error("No se recibieron datos");Fe.value=e.data,console.log("Clientes cargados:",Fe.value)}catch(e){console.error("Error en fetchClientes:",e)}},Qe=()=>{m.value=new z.A({target:"map",layers:[new X.A({source:new B.A})],view:new q.Ay({center:(0,G.Rb)([-77.042793,-12.046374]),zoom:12})});const e=new Q.A({geometry:new H.A((0,G.Rb)([-77.042793,-12.046374]))}),o=new J.Ay({image:new ee.A({anchor:[.5,1],src:"https://openlayers.org/en/latest/examples/data/icon.png"})});e.setStyle(o);const t=new Y.A({source:new Z.A({features:[e]})});m.value.addLayer(t),b.value=e,m.value.on("click",(e=>{const o=(0,G.WP)(e.coordinate);Ye(o[1],o[0])}))},He=async()=>{try{const e=await v.A.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(d.value)}`);if(e.data&&e.data.length>0){const{lat:o,lon:t}=e.data[0];Ye(parseFloat(o),parseFloat(t))}}catch(e){console.error("Error searching location:",e)}},Ye=(e,o)=>{xe.latitud=e.toFixed(6),xe.longitud=o.toFixed(6);const t=(0,G.Rb)([o,e]);b.value.getGeometry().setCoordinates(t),m.value.getView().setCenter(t),Ze()},Ze=async()=>{try{const e=await v.A.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${xe.latitud}&lon=${xe.longitud}`);e.data&&(xe.direccion=e.data.display_name,xe.distrito=e.data.address.suburb||e.data.address.city_district||"")}catch(e){console.error("Error getting address:",e)}},Je=e=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`,eo=e=>`https://wa.me/${e}`,oo=e=>{const o={pendiente:"orange","en proceso":"blue",entregado:"green",cancelado:"red"};return o[e.toLowerCase()]||"grey"},to=()=>{l.value>1&&l.value--},ao=async()=>{if(2===l.value)try{he()}catch(e){console.error("Error al registrar el pedido:",e),alert("Error al registrar el pedido. Por favor, intente nuevamente.")}else l.value++},lo=()=>{$.value=!1,j.value=null},io=async()=>{A.value=j.value,E.value="express"===j.value?I.value+4:I.value,x.value+="express"===j.value?"\nCosto de envío Express: S/ 4.00":"",$.value=!1,console.log("ENTRANDO A CIRCULAR PROGRESSSS------\x3e>>>>>>>>>>>"),ie(),await Te()},ro=async()=>{try{if(!xe.nombre||!xe.telefono||!xe.direccion)return alert("Por favor complete los datos del cliente"),!1;const e=[...g.value,...f.value].some((e=>e.cantidad>0));if(!e)return alert("Por favor seleccione al menos un producto"),!1;const o=await Te();return o}catch(e){throw console.error("Error en registrarPedido:",e),e}},no=e=>{r.value={...e},U.value=`Se debe realizar una transferencia a ${e.banco_retiro} al siguiente número de cuenta o número de Yape/Plin: ${e.numero_cuenta}, la cantidad de: ${e.saldo_beneficios}, a la persona: ${e.nombre} ${e.apellidos}.`,p.value=!0},so=async()=>{try{const e=await v.A.put(`${k.value}${h}/user_cliente_saldo/${r.value.id}`,{saldo_beneficios:0,quiereretirar:!1});if(200===e.status){const e=Fe.value.findIndex((e=>e.id===r.value.id));-1!==e&&(Fe.value[e].saldo_beneficios=0,Fe.value[e].quiereretirar=!1,Fe.value=Fe.value.filter((e=>e.saldo_beneficios>0))),p.value=!1,alert("Cliente actualizado con éxito")}}catch(e){console.error("Error al actualizar el cliente:",e),alert("Hubo un error al actualizar el cliente")}};return{productos:g,listFinalProductosSeleccionadosConDSCT:P,promos:f,pedidos:c,getGoogleMapsLink:Je,getWhatsAppLink:eo,getEstadoColor:oo,estadoPedido:L,autorizadoPor:N,cargo:O,dialog:o,dialogSaldo:p,incrementQuantity:je,decrementQuantity:Me,confirmarItem:ze,model:t,model1:a,activeStep:l,headers:_e,items:Ee,search:i,searchQuery:d,formData:xe,tipo:A,confirmData:Ve,dialogConfirm:R,listSeleccionados:y,listPromosSeleccionadas:F,listFinalProductosSeleccionados:w,crearPedido:Te,descuentoTotalPedido:C,montoTotalPedido:E,observacionFinal:x,calculoDeSeleccionadosYMontos:qe,resetearFormulario:Ne,prevs:to,nexts:ao,registrarPedido:ro,searchLocation:He,getAddress:Ze,getImageUrl:De,updateLocationRelation:Ie,mostrarModalTipoPedido:$,tipoPedidoSeleccionado:j,tiposPedido:re,cerrarModal:lo,procesarPedido:io,clienteHeaders:ye,clientes:Fe,searchClient:we,updateClient:so,editedItem:r,dialogMessage:U,editClient:no,dialogoVisible:S,pedidoEditado:n,estadosDisponibles:ne,openEditDialog:pe,cerrarDialogo:me,guardarCambios:be,deleteItem:ge,cerrarDialogoEliminar:fe,deletePedido:ke,confirmarEliminacion:ve,orderDialog:oe,selectedOrder:te,productosYCantidadesPorPedido:ae,viewOrder:se,deleteDialog:K,pedidoAEliminar:T,motivoEliminacion:W,getProductoDePromo:Re,searchPedido:Pe,pedidoHeaders:Ce,pedidosproc:u,dialogCircular:le,openDialog:ie,closeDialog:de}}};const te=(0,y.A)(oe,[["render",j],["__scopeId","data-v-568b5214"]]);var ae=te;const le={style:{"max-width":"200px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},ie=["href"];function de(e,o,t,a,l,i){const d=(0,s.g2)("v-btn"),r=(0,s.g2)("v-snackbar"),n=(0,s.g2)("v-card-title"),u=(0,s.g2)("v-card-subtitle"),p=(0,s.g2)("v-col"),m=(0,s.g2)("v-row"),b=(0,s.g2)("v-card-item"),g=(0,s.g2)("v-card"),f=(0,s.g2)("v-text-field"),k=(0,s.g2)("v-icon"),v=(0,s.g2)("v-data-table"),h=(0,s.g2)("v-card-text"),_=(0,s.g2)("v-card-actions"),y=(0,s.g2)("v-dialog"),F=(0,s.g2)("v-chip");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(r,{modelValue:a.snackbar.show,"onUpdate:modelValue":o[1]||(o[1]=e=>a.snackbar.show=e),color:a.snackbar.color,timeout:3e3},{actions:(0,s.k6)((()=>[(0,s.bF)(d,{color:"white",text:"",onClick:o[0]||(o[0]=e=>a.snackbar.show=!1)},{default:(0,s.k6)((()=>o[8]||(o[8]=[(0,s.eW)(" Cerrar ")]))),_:1})])),default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(a.snackbar.text)+" ",1)])),_:1},8,["modelValue","color"]),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"mx-auto","max-width":"400"},{default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(m,{align:"center","no-gutters":""},{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"text-h6"},{default:(0,s.k6)((()=>[(0,s.eW)(" Nos encontramos en la ruta N° "+(0,c.v_)(a.rutaIdLastPublica),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>o[9]||(o[9]=[(0,s.eW)(" Última ruta registrada en el sistema ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{elevation:"6",flat:"",class:"pedidos-pendientes"},{title:(0,s.k6)((()=>o[10]||(o[10]=[(0,s.Lk)("div",{class:"alineartexto"},"Pedidos Pendientes",-1)]))),text:(0,s.k6)((()=>[(0,s.bF)(f,{modelValue:a.search,"onUpdate:modelValue":o[2]||(o[2]=e=>a.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(v,{selected:a.selectedPedidos,"onUpdate:selected":o[3]||(o[3]=e=>a.selectedPedidos=e),items:a.items,headers:a.headers,search:a.search,"item-value":"id","items-per-page":5,"show-select":"","return-object":"",class:"elevation-1 pedidos-pendientes-table","onUpdate:modelValue":a.updateSelectedPedidos},{["item.fecha"]:(0,s.k6)((({item:e})=>[(0,s.eW)((0,c.v_)(a.formatDate(e.fecha)),1)])),["item.actions"]:(0,s.k6)((({item:e})=>[(0,s.bF)(k,{class:"mr-2 cursor-pointer",color:"primary",onClick:o=>a.addToRoute(e)},{default:(0,s.k6)((()=>o[11]||(o[11]=[(0,s.eW)(" mdi-plus ")]))),_:2},1032,["onClick"]),(0,s.bF)(k,{class:"mr-2 cursor-pointer",color:"error",onClick:o=>a.deletePedido(e)},{default:(0,s.k6)((()=>o[12]||(o[12]=[(0,s.eW)(" mdi-delete ")]))),_:2},1032,["onClick"]),(0,s.bF)(k,{class:"cursor-pointer",color:"info",onClick:o=>a.viewOrder(e)},{default:(0,s.k6)((()=>o[13]||(o[13]=[(0,s.eW)(" mdi-eye ")]))),_:2},1032,["onClick"])])),_:2},1032,["selected","items","headers","search","onUpdate:modelValue"])])),_:1}),(0,s.bF)(y,{modelValue:a.orderDialog,"onUpdate:modelValue":o[5]||(o[5]=e=>a.orderDialog=e),"max-width":"600px"},{default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.eW)("Detalles del Pedido #"+(0,c.v_)(a.selectedOrder?.id),1)])),_:1}),(0,s.bF)(h,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,"Dirección: "+(0,c.v_)(a.selectedOrder?.direccion),1),(0,s.Lk)("div",null,"Total: "+(0,c.v_)(a.selectedOrder?.total),1),o[14]||(o[14]=(0,s.Lk)("div",null,"Productos:",-1)),(0,s.Lk)("pre",null,(0,c.v_)(a.productosYCantidadesPorPedido[a.selectedOrder?.id]),1)])),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{color:"primary",text:"",onClick:o[4]||(o[4]=e=>a.orderDialog=!1)},{default:(0,s.k6)((()=>o[15]||(o[15]=[(0,s.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(p,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{elevation:"6",flat:"",class:"pedidos-en-proceso"},{title:(0,s.k6)((()=>o[16]||(o[16]=[(0,s.Lk)("div",{class:"alineartexto"},"Pedidos En Proceso",-1)]))),text:(0,s.k6)((()=>[(0,s.bF)(f,{modelValue:a.searchProceso,"onUpdate:modelValue":o[6]||(o[6]=e=>a.searchProceso=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(v,{items:a.enproceso,headers:e.headerProceso,search:a.searchProceso,"items-per-page":5,"sort-by":[{key:"id",order:"desc"}],class:"pedidos-en-proceso-table"},{["item.fecha"]:(0,s.k6)((({item:e})=>[(0,s.eW)((0,c.v_)(a.formatDate(e.fecha)),1)])),["item.direccion"]:(0,s.k6)((({item:e})=>[(0,s.Lk)("div",le,[(0,s.Lk)("a",{href:a.getGoogleMapsLink(e.direccion),target:"_blank"},(0,c.v_)(e.direccion),9,ie)])])),_:2},1032,["items","headers","search"])])),_:1})])),_:1}),(0,s.bF)(p,{cols:"4"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{elevation:"6",flat:"",class:"conductores"},{title:(0,s.k6)((()=>o[17]||(o[17]=[(0,s.Lk)("div",{class:"alineartexto"},"Conductores",-1)]))),text:(0,s.k6)((()=>[(0,s.bF)(f,{modelValue:a.searchConductores,"onUpdate:modelValue":o[7]||(o[7]=e=>a.searchConductores=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])])),default:(0,s.k6)((()=>[(0,s.bF)(v,{items:a.conductores,headers:a.conductoresHeaders,search:a.searchConductores,"items-per-page":7,class:"conductores-table"},{["item.estado"]:(0,s.k6)((({item:e})=>[(0,s.bF)(F,{color:"conectado"===e.estado?"green":"red","text-color":"white",small:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(e.estado),1)])),_:2},1032,["color"])])),_:2},1032,["items","headers","search"])])),_:1})])),_:1})])),_:1}),(0,s.bF)(m,{class:"mt-4 justify-center"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{onClick:a.crearRutaPublica,color:"primary",loading:a.loading,class:"btn-large"},{default:(0,s.k6)((()=>o[18]||(o[18]=[(0,s.eW)(" Crear ruta ")]))),_:1},8,["onClick","loading"])])),_:1})])}var re={name:"Ruta",setup(){const e=(0,M.KR)(null),o=(0,M.KR)(""),t=(0,M.KR)(""),a=(0,M.KR)(""),l=(0,M.KR)([]),i=(0,M.KR)([]),d=(0,M.KR)([]),r=(0,M.KR)([]),n=(0,M.KR)([]),c=(0,M.KR)(!1),u=(0,M.KR)(null),p=(0,M.KR)({}),m=(0,M.KR)(!1),b=(0,M.KR)({show:!1,text:"",color:"success"}),g=(0,M.KR)([{title:"ID",key:"id",sortable:!0},{title:"Tipo",key:"tipo",sortable:!0},{title:"Distrito",key:"distrito",sortable:!0},{title:"Estado",key:"estado",sortable:!0},{title:"Fecha",key:"fecha",sortable:!0},{title:"Ruta",key:"ruta_id",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),f=((0,M.KR)([{title:"ID",key:"id",sortable:!0},{title:"Tipo",key:"tipo",sortable:!0},{title:"Distrito",key:"distrito",sortable:!0},{title:"Estado",key:"estado",sortable:!0},{title:"Fecha",key:"fecha",sortable:!0},{title:"Ruta",key:"ruta_id",sortable:!0}]),(0,M.KR)([{title:"ID",key:"id",sortable:!0},{title:"Nombre",key:"nombre",sortable:!0},{title:"Estado",key:"estado",sortable:!0}])),k="/detallepedidopromo/",h="/api",_=(0,M.KR)("http://127.0.0.1:4000"),y=e=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`,F=async()=>{try{const e=await v.A.get(`${_.value}/api/pedidosPendientesTotales`);200===e.status&&(d.value=e.data.map((e=>({id:e.id,tipo:e.tipo,distrito:e.distrito,estado:e.estado,fecha:e.fecha,ruta_id:e.ruta_id,total:e.total,direccion:e.direccion}))))}catch(e){console.error("Failed to load pedidos:",e),E("No se pudieron cargar los pedidos","error")}},w=async()=>{try{const e=await v.A.get(`${_.value}/api/pedidosDesktop`);200===e.status&&(n.value=e.data.map((e=>({id:e.id,tipo:e.tipo,distrito:e.distrito,estado:e.estado,fecha:e.fecha,ruta_id:e.ruta_id,total:e.total,direccion:e.direccion}))))}catch(e){console.error("Failed to load pedidos:",e),E("No se pudieron cargar los pedidos","error")}},P=async()=>{try{const e=await v.A.get(`${_.value}/api/user_conductores`);200===e.status&&(r.value=e.data.map((e=>({id:e.id,nombre:`${e.nombres} ${e.apellidos}`,estado:e.estado}))))}catch(e){console.error("Failed to load conductores:",e),E("No se pudieron cargar los conductores","error")}},C=e=>{const o={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,o)},E=(e,o="success")=>{b.value.text=e,b.value.color=o,b.value.show=!0},x=e=>{l.value=e},V=async()=>{try{m.value=!0;const e=(0,M.ux)(l.value);if(!e||0===e.length)throw new Error("Debe seleccionar al menos un pedido");const o=D(),t=A(),a=await v.A.post(`${_.value}/api/ruta`,{distancia_km:o,tiempo_ruta:t,fecha_creacion:(new Date).toISOString()}),i=a.data.id;if(!i)throw new Error("No se pudo obtener el ID de la ruta creada");const d=e.map((e=>v.A.put(`${_.value}/api/pedidoruta/${e.id}`,{ruta_id:i,estado:"pendiente"})));await Promise.all(d),await F(),await w(),L(),m.value=!1,E("Ruta creada exitosamente")}catch(e){console.error("Error al crear ruta:",e),m.value=!1,E(e.message||"Error al crear la ruta","error")}},D=()=>5*l.value.length,A=()=>10*l.value.length,L=()=>{l.value=[],i.value=[]},R=async e=>{u.value=e,await $(e.id),c.value=!0},$=async e=>{if(e)try{const o=await v.A.get(`${_.value}${h}${k}${e}`),t=o.data.map((e=>({pedidoID:e.pedido_id,productoNombre:e.nombre_prod,cantidadProd:e.cantidad,promocionID:e.promocion_id,nombrePromo:e.nombre_promocion})));console.log("---------------\x3e DETALLES PEDIDOS<--------------------"),console.log(t);let a=t.map((e=>e.promocionID&&e.nombrePromo?`${I(e.nombrePromo)} x ${e.cantidadProd} uds.`:`${I(e.productoNombre)} x ${e.cantidadProd} uds.`)).join("\n");p.value[e]=a}catch(o){console.error("Error al cargar los detalles del pedido:",o),alert("Error al cargar los detalles del pedido")}},I=e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"",U=async()=>{try{console.log("RUTA-ADD-----------------\x3e"),console.log(`${_.value}/api/rutalastAll`);const o=await v.A.get(`${_.value}/api/rutalastAll`,{headers:{"Content-type":"application/json"}});console.log(e.value),e.value=o.data.id??0}catch(o){console.error("Error fetching last public route:",o)}},S=async o=>{try{if(!e.value&&(console.log("ENTRANDO A ADDROUTE"),console.log(`${o.id}`),await U(),!e.value))throw new Error("No se pudo obtener la última ruta pública");await v.A.put(`${_.value}/api/pedidoruta/${o.id}`,{ruta_id:e.value,estado:"pendiente"}),E(`Pedido ${o.id} agregado a la ruta`),await F(),await w()}catch(t){console.error("Error adding order to route:",t),E("Error al agregar pedido a la ruta","error")}},K=async e=>{try{console.log("Entrando a Eliminar Ruta"),console.log(`${e.id}`);const o=await v.A.delete(`${_.value}/api/revertirpedido/${e.id}`);200===o.status&&(E("Pedido eliminado correctamente"),await F(),await w())}catch(o){console.error("Error al eliminar pedido:",o),E("Error al eliminar pedido","error")}};return(0,s.sV)((()=>{F(),w(),P(),U(),console.log("API URL from env:","http://127.0.0.1:4000"),console.log("API URL from ref:",_.value)})),{search:o,searchConductores:t,searchProceso:a,selectedPedidos:l,selectedConductores:i,items:d,conductores:r,enproceso:n,orderDialog:c,selectedOrder:u,productosYCantidadesPorPedido:p,loading:m,snackbar:b,headers:g,conductoresHeaders:f,fetchPedidos:F,fetchPedidosProceso:w,fetchConductores:P,formatDate:C,showMessage:E,crearRutaPublica:V,viewOrder:R,addToRoute:S,deletePedido:K,rutaIdLastPublica:e,updateSelectedPedidos:x,getGoogleMapsLink:y}}};const ne=(0,y.A)(re,[["render",de],["__scopeId","data-v-4eb16633"]]);var se=ne;const ce={key:0},ue={key:1};function pe(e,o,t,a,l,i){const d=(0,s.g2)("v-card-title"),r=(0,s.g2)("v-icon"),n=(0,s.g2)("v-btn"),u=(0,s.g2)("v-data-table"),p=(0,s.g2)("v-card"),m=(0,s.g2)("v-card-text"),b=(0,s.g2)("v-spacer"),g=(0,s.g2)("v-card-actions"),f=(0,s.g2)("v-dialog"),k=(0,s.g2)("v-container");return(0,s.uX)(),(0,s.Wv)(k,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>o[3]||(o[3]=[(0,s.eW)("Pedidos")]))),_:1}),(0,s.bF)(u,{modelValue:a.selectedPedidos,"onUpdate:modelValue":[o[0]||(o[0]=e=>a.selectedPedidos=e),a.updateSelectedPedidos],items:a.items,headers:a.headers,"item-value":"id",returnObject:!0,"show-select":"",class:"elevation-1","items-per-page":5},{["item.fecha"]:(0,s.k6)((({item:e})=>[(0,s.eW)((0,c.v_)(a.formatDate(e.fecha)),1)])),["item.actions"]:(0,s.k6)((({item:e})=>[(0,s.bF)(n,{icon:"",onClick:o=>a.deletePedido(e)},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>o[4]||(o[4]=[(0,s.eW)("mdi-delete")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","items","headers","onUpdate:modelValue"])])),_:1}),(0,s.bF)(n,{class:"mt-4",color:"primary",onClick:a.openDialog},{default:(0,s.k6)((()=>o[5]||(o[5]=[(0,s.eW)("Ver Selección")]))),_:1},8,["onClick"]),(0,s.bF)(f,{modelValue:a.dialog,"onUpdate:modelValue":o[2]||(o[2]=e=>a.dialog=e),"max-width":"600"},{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>o[6]||(o[6]=[(0,s.eW)("Detalles de Selección")]))),_:1}),(0,s.bF)(m,null,{default:(0,s.k6)((()=>[0===a.selectedPedidos.length?((0,s.uX)(),(0,s.CE)("div",ce,"No hay elementos seleccionados.")):((0,s.uX)(),(0,s.CE)("div",ue,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.selectedPedidos,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},[o[7]||(o[7]=(0,s.Lk)("strong",null,"ID:",-1)),(0,s.eW)(" "+(0,c.v_)(e.id)+" | ",1),o[8]||(o[8]=(0,s.Lk)("strong",null,"Tipo:",-1)),(0,s.eW)(" "+(0,c.v_)(e.tipo)+" | ",1),o[9]||(o[9]=(0,s.Lk)("strong",null,"Distrito:",-1)),(0,s.eW)(" "+(0,c.v_)(e.distrito)+" | ",1),o[10]||(o[10]=(0,s.Lk)("strong",null,"Estado:",-1)),(0,s.eW)(" "+(0,c.v_)(e.estado),1)])))),128))]),(0,s.bF)(n,{color:"red",onClick:a.deleteSelectedPedidos},{default:(0,s.k6)((()=>o[11]||(o[11]=[(0,s.eW)("Eliminar Selección")]))),_:1},8,["onClick"])]))])),_:1}),(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(b),(0,s.bF)(n,{text:"",onClick:o[1]||(o[1]=e=>a.dialog=!1)},{default:(0,s.k6)((()=>o[12]||(o[12]=[(0,s.eW)("Cerrar")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var me={name:"Componente",setup(){const e=(0,M.KR)([{id:1,tipo:"Urgente",distrito:"Lima",estado:"Pendiente",fecha:"2024-01-10"},{id:2,tipo:"Normal",distrito:"Arequipa",estado:"Completado",fecha:"2024-02-12"},{id:3,tipo:"Urgente",distrito:"Cusco",estado:"En progreso",fecha:"2024-03-14"},{id:4,tipo:"Normal",distrito:"Trujillo",estado:"Pendiente",fecha:"2024-04-16"},{id:5,tipo:"Express",distrito:"Piura",estado:"Pendiente",fecha:"2024-05-18"}]),o=(0,M.KR)([{title:"ID",key:"id",sortable:!0},{title:"Tipo",key:"tipo",sortable:!0},{title:"Distrito",key:"distrito",sortable:!0},{title:"Estado",key:"estado",sortable:!0},{title:"Fecha",key:"fecha",sortable:!0},{title:"Acciones",key:"actions"}]),t=(0,M.KR)([]),a=(0,M.KR)(!1),l=()=>{0===t.value.length?alert("No hay elementos seleccionados"):a.value=!0},i=e=>{t.value=e},d=e=>{const o={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,o)},r=o=>{console.log(`Eliminar pedido con ID: ${o.id}`),e.value=e.value.filter((e=>e.id!==o.id)),t.value=t.value.filter((e=>e.id!==o.id))},n=()=>{console.log("Eliminar selección de pedidos:",t.value),t.value.forEach((o=>{e.value=e.value.filter((e=>e.id!==o.id))})),t.value=[]};return{items:e,headers:o,selectedPedidos:t,dialog:a,openDialog:l,formatDate:d,updateSelectedPedidos:i,deletePedido:r,deleteSelectedPedidos:n}}};const be=(0,y.A)(me,[["render",pe],["__scopeId","data-v-331bed9b"]]);var ge=be;const fe=[{path:"/",name:"LoginForm",component:w},{path:"/gestion",name:"Gestion",component:ae},{path:"/home",name:"Inicio",component:R},{path:"/ruta",name:"Ruta",component:se},{path:"/componente",name:"Componente",component:ge}],ke=(0,n.aE)({history:(0,n.LA)("/"),routes:fe});var ve=ke;const he=(0,h.y$)({state:{usuario:null,rol_id:null},mutations:{setUsuario(e,o){e.usuario=o},setRol(e,o){e.rol_id=o}},getters:{isLoggedIn:e=>!!e.usuario,getUsuario:e=>e.usuario,getRol:e=>e.rol_id}});var _e=he;const ye={class:"contenedor"},Fe={class:"hijo"},we={class:"cajablanco"},Pe={class:"imgcircle"};function Ce(e,o,a,l,i,d){const r=(0,s.g2)("v-img"),n=(0,s.g2)("v-icon"),u=(0,s.g2)("v-col"),p=(0,s.g2)("v-row"),m=(0,s.g2)("v-list-item"),b=(0,s.g2)("router-link"),g=(0,s.g2)("v-list"),f=(0,s.g2)("v-list-item-icon"),k=(0,s.g2)("v-list-item-title"),v=(0,s.g2)("v-list-item-content"),h=(0,s.g2)("v-navigation-drawer"),_=(0,s.g2)("InicioVue"),y=(0,s.g2)("router-view"),F=(0,s.g2)("v-main"),w=(0,s.g2)("v-app");return(0,s.uX)(),(0,s.Wv)(w,null,{default:(0,s.k6)((()=>[d.mostrarLayout?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"barracolor",app:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ye,[(0,s.Lk)("div",Fe,[(0,s.bF)(r,{src:t(5730)},null,8,["src"])])]),(0,s.Lk)("div",we,[(0,s.bF)(p,{class:"mb-4"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{cols:"3"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Pe,[(0,s.bF)(n,{size:"medium",color:"white"},{default:(0,s.k6)((()=>o[0]||(o[0]=[(0,s.eW)("mdi-account")]))),_:1})])])),_:1}),(0,s.bF)(u,{cols:"9",class:"d-flex flex-column justify-center align-center"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"text-white text-h6"},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(d.nombreUsuario),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,c.v_)(d.apellidoUsuario),1)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s.bF)(g,{nav:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.routes,(e=>((0,s.uX)(),(0,s.Wv)(b,{key:e.name,to:{name:e.name},class:"text-white no-underline"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{"prepend-icon":e.icon,title:e.title,class:"menu-item text-white"},null,8,["prepend-icon","title"])])),_:2},1032,["to"])))),128))])),_:1}),(0,s.bF)(g,{nav:"",style:{"margin-top":"450px"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,{onClick:d.logout,class:"menu-item text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(n,{color:"white"},{default:(0,s.k6)((()=>o[1]||(o[1]=[(0,s.eW)("mdi-logout")]))),_:1})])),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(k,{class:"text-white"},{default:(0,s.k6)((()=>o[2]||(o[2]=[(0,s.eW)("Salir")]))),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})):(0,s.Q3)("",!0),d.mostrarLayout&&"LoginForm"!==this.$router.currentRoute.name?((0,s.uX)(),(0,s.Wv)(_,{key:1})):(0,s.Q3)("",!0),(0,s.bF)(F,{class:"ma-3"},{default:(0,s.k6)((()=>[(0,s.bF)(y)])),_:1})])),_:1})}var Ee={name:"App",data(){return{routes:[{name:"Inicio",icon:"mdi-home",title:"Inicio"},{name:"Gestion",icon:"mdi-file-account-outline",title:"Gestión"},{name:"Ruta",icon:"mdi-motorbike",title:"Ruta"}]}},computed:{...(0,h.aH)({usuario:e=>e.usuario}),nombreUsuario(){return this.usuario?this.usuario.nombres:""},apellidoUsuario(){return this.usuario?this.usuario.apellidos:""},mostrarLayout(){return"LoginForm"!==this.$route.name}},methods:{logout(){this.$router.push({name:"LoginForm"})}}};const xe=(0,y.A)(Ee,[["render",Ce]]);var Ve=xe;const De=(0,l.$N)({components:d,directives:r,icons:{defaultSet:"mdi",aliases:i.z,sets:{mdi:i.r}}});(0,a.Ef)(Ve).use(De).use(ve).use(_e).mount("#app")},8275:function(e,o,t){e.exports=t.p+"img/calculadora.27fa3776.png"},4074:function(e,o,t){e.exports=t.p+"img/entregados.7cbcfa16.png"},2944:function(e,o,t){e.exports=t.p+"img/hoja.bbe066ca.png"},5730:function(e,o,t){e.exports=t.p+"img/nuevito.78ff4de4.png"},8007:function(e,o,t){e.exports=t.p+"img/pendientes.f2255923.png"},5634:function(e,o,t){e.exports=t.p+"img/procesos.369db73d.png"}},o={};function t(a){var l=o[a];if(void 0!==l)return l.exports;var i=o[a]={exports:{}};return e[a].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(o,a,l,i){if(!a){var d=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],i=e[c][2];for(var r=!0,n=0;n<a.length;n++)(!1&i||d>=i)&&Object.keys(t.O).every((function(e){return t.O[e](a[n])}))?a.splice(n--,1):(r=!1,i<d&&(d=i));if(r){e.splice(c--,1);var s=l();void 0!==s&&(o=s)}}return o}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,l,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var l,i,d=a[0],r=a[1],n=a[2],s=0;if(d.some((function(o){return 0!==e[o]}))){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(n)var c=n(t)}for(o&&o(a);s<d.length;s++)i=d[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},a=self["webpackChunkcentralpedidos"]=self["webpackChunkcentralpedidos"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(1351)}));a=t.O(a)})();
//# sourceMappingURL=app.12c6d523.js.map