import{p as x,r as h,O as S,P as D,E as $,Q as k,o as _,c as y,w as t,a as e,i as a,J as E,t as i,d as w,q as V,m as P,S as C,b as d,n as g,T as I,s as O,F as T,U as N,l as R,V as b,W as m,X as r}from"./index.e813902e.js";const B={class:"d-sm-flex align-center mb-5"},U=a("div",null,[a("h3",{class:"text-h6 title font-weight-medium"},"Ventas")],-1),W={class:"ml-auto"},j={class:"d-flex align-center"},z={class:"d-flex align-center px-2"},L={class:"text-primary"},F=a("span",{class:"text-overline"},[a("i",{class:"mdi mdi-brightness-1 mx-1"})],-1),q={class:"font-weight-regular"},A={key:0},H=x({setup(v){const n=h(!1),c=h([]),l=S({chartOptions:{chart:{type:"bar",height:280,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{type:"category",categories:[],labels:{style:{colors:"#000",fontSize:"12px"}},title:{text:"D\xEDas de la Semana",style:{fontSize:"12px"}}},yaxis:{title:{text:"Ventas Totales"}},fill:{opacity:1},tooltip:{y:{formatter:function(o){return`S/. ${o}`}}},colors:["#556ee6"]},series:[{name:"Ventas",data:[]}]}),f=D(()=>{if(c.value.length>0){const o=c.value[0];return`${o.mes_actual}- Semana ${o.semana_del_mes}`}return"Ventas"});return $(async()=>{try{const o="http://147.182.251.164:8082",p=await g.get(`${o}/apigw/v1/pedido_semanal`);c.value=p.data,l.chartOptions.xaxis.categories=p.data.map(u=>u.dia_semana),l.series[0].data=p.data.map(u=>u.suma_total),n.value=!0}catch(o){console.error("Error fetching weekly sales data:",o)}}),(o,p)=>{const u=k("apexchart");return _(),y(d,null,{default:t(()=>[e(C,{class:"pa-7"},{default:t(()=>[a("div",B,[U,e(E),a("div",W,[a("div",j,[a("div",z,[a("span",L,[F,a("span",q,i(w(f)),1)])])])])]),n.value?(_(),V("div",A,[e(u,{type:"bar",height:"280px",options:w(l).chartOptions,series:w(l).series},null,8,["options","series"])])):P("",!0)]),_:1})]),_:1})}}}),J=a("div",{class:"d-sm-flex align-center"},[a("h2",{class:"title text-h6 font-weight-medium"},"Distribuidores")],-1),M=a("thead",null,[a("tr",null,[a("th",null,"Id"),a("th",null,"Nombre"),a("th",null,"Tel\xE9fono"),a("th",null,"Pedidos pendientes")])],-1),Q=x({setup(v){const n=h([]),c=async()=>{try{const l="http://147.182.251.164:8082/apigw/v1/distribuidor";console.log("Intentando acceder a:",l);const f=await g.get(l);n.value=f.data.map(s=>({id:s.id,leadname:`${s.nombres} ${s.apellidos}`,telefono:s.telefono,statustext:s.total_pedidos_pendientes,statuscolor:"info"}))}catch(l){console.error("Error completo:",l)}};return $(()=>{c()}),(l,f)=>(_(),y(d,{flat:"",class:"w-100 h-100"},{default:t(()=>[e(C,null,{default:t(()=>[J,e(I,{class:"month-table mt-7"},{default:t(()=>[M,a("tbody",null,[(_(!0),V(T,null,O(n.value,s=>(_(),V("tr",{key:s.id},[a("td",null,i(s.id),1),a("td",null,i(s.leadname),1),a("td",null,i(s.telefono),1),a("td",null,[e(N,{color:"info",label:""},{default:t(()=>[R(i(s.statustext),1)]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1}))}}),X={class:"title font-weight-medium mb-2 text-h6",style:{color:"white"}},G={class:"title font-weight-medium mb-2 text-h6",style:{color:"grey"}},K={class:"title font-weight-medium mb-2 text-h6",style:{color:"white"}},Y=x({setup(v){const n=h(0),c=h(0),l=h(0);return $(async()=>{try{const s="http://147.182.251.164:8082",o=await g.get(`${s}/apigw/v1/pedido_pendiente`);n.value=parseInt(o.data.total_pedidos_pendientes);const p=await g.get(`${s}/apigw/v1/pedido_enproceso`);c.value=parseInt(p.data.total_pedidos_enproceso);const u=await g.get(`${s}/apigw/v1/pedido_entregado`);l.value=parseInt(u.data.total_pedidos_entregados)}catch(s){console.error("Error fetching pedidos data:",s)}}),(s,o)=>(_(),y(m,null,{default:t(()=>[e(r,{cols:"12",lg:"4"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(b,null,{default:t(()=>[e(m,{justify:"center",align:"center"},{default:t(()=>[e(r,{cols:"8"},{default:t(()=>[e(d,{color:"blue",class:"pa-4 text-center"},{default:t(()=>[a("h2",X,i(n.value)+" Pendientes ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",lg:"4"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(b,null,{default:t(()=>[e(m,{justify:"center",align:"center"},{default:t(()=>[e(r,{cols:"8"},{default:t(()=>[e(d,{color:"yellow",class:"pa-4 text-center"},{default:t(()=>[a("h2",G,i(c.value)+" En proceso ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{cols:"12",lg:"4"},{default:t(()=>[e(d,{class:"pa-4"},{default:t(()=>[e(b,null,{default:t(()=>[e(m,{justify:"center",align:"center"},{default:t(()=>[e(r,{cols:"8"},{default:t(()=>[e(d,{color:"green",class:"pa-4 text-center"},{default:t(()=>[a("h2",K,i(l.value)+" Entregados ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),ee=x({setup(v){return(n,c)=>(_(),y(m,null,{default:t(()=>[e(r,{cols:"12",sm:"12"},{default:t(()=>[e(Y)]),_:1}),e(r,{cols:"12",sm:"12"},{default:t(()=>[e(H)]),_:1}),e(r,{cols:"12",sm:"12",class:"d-flex align-items-stretch"},{default:t(()=>[e(Q)]),_:1})]),_:1}))}});export{ee as default};
