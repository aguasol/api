import{_ as ie}from"./BaseCard.902c6cb8.js";import{p as le,r,$ as ce,E as ue,n as I,o as i,c as X,w as s,a as o,i as t,t as n,U as K,l as _,j as N,f as O,b as M,S as Q,a0 as pe,a1 as _e,a2 as Z,q as c,a3 as fe,v as he,F as ee,s as te,a4 as ge,J as ve,T as me,a5 as ye,a6 as be,A as $e,z as xe,y as ae,W as Se,X as re}from"./index.fb152853.js";import{_ as De}from"./plugin-vue_export-helper.21dcd24c.js";const oe=f=>(ye("data-v-69bd7c80"),f=f(),be(),f),ke={class:"d-flex align-center"},Ce=_(" Seleccionar fecha "),Ve={class:"d-flex flex-column align-center"},Ae=oe(()=>t("h3",{class:"mb-4 text-primary"},"Seleccione una fecha",-1)),Ee={key:0},Ue={key:1},Pe={key:0,class:"d-flex justify-center"},Te={key:1,class:"detalle-pedido"},Ie=oe(()=>t("div",{class:"info-row"},[t("strong",null,"Productos:")],-1)),Ne={key:2,class:"text-center my-4"},Me=_(" Cerrar "),ze={class:"mt-4"},Le=oe(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left font-weight-bold"},"Id"),t("th",{class:"text-left font-weight-bold"},"Nombre"),t("th",{class:"text-left font-weight-bold"},"Tel\xE9fono"),t("th",{class:"text-left font-weight-bold"},"Direcci\xF3n"),t("th",{class:"text-left font-weight-bold"},"Fecha"),t("th",{class:"text-left font-weight-bold"},"Total"),t("th",{class:"text-left font-weight-bold"},"Estado"),t("th",{class:"text-left font-weight-bold"},"Acciones")])],-1)),Fe={key:0},He=oe(()=>t("td",{colspan:"7",class:"text-center"},"Cargando...",-1)),je=[He],qe={key:1},Be=oe(()=>t("td",{colspan:"7",class:"text-center"},"No hay datos disponibles",-1)),Ge=[Be],Re={class:"maps-link"},Ye=["href"],Je=_("mdi-map-marker"),We=_(" Ver en Google Maps "),Xe=_("mdi-eye"),Ke=le({props:{selectedDate:{type:String,required:!0}},emits:["update-date","update-title"],setup(f,{emit:S}){const A=f,$="http://147.182.251.164:8082",h=r(!1),g=r(!1),p=r(A.selectedDate),v=r([]),x=r(!1),C=r("Alto Selva Alegre"),m=r(null),D=r(!1),w=r(null);ce(()=>A.selectedDate,d=>{p.value=d,V(),k()}),ue(()=>{V(),k()});function U(d){const[a,e,l]=d.split("-").map(Number);return new Date(a,e-1,l).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}function G(d){if(!d)return"N/A";const a=new Date(d);a.setHours(a.getHours()+5);const e=a.getDate().toString().padStart(2,"0"),l=(a.getMonth()+1).toString().padStart(2,"0"),u=a.getFullYear(),y=a.getHours().toString().padStart(2,"0"),b=a.getMinutes().toString().padStart(2,"0");return`${e}/${l}/${u} ${y}:${b}`}function R(d,a){return!d||!a?"#":`https://www.google.com/maps?q=${d},${a}`}function Y(){h.value=!0}function J(){h.value=!1,S("update-date",p.value),V(),k()}function V(){const d=`${$}/apigw/v1/pedido_distribuidor_conteo/${p.value}`;I.get(d).then(a=>{const e=a.data.find(l=>l.almacen_id===1);if(e&&e.distribuidor&&e.distribuidor.length>0){const l=e.distribuidor[0],u=`Distribuidor ${l.nombres} ${l.apellidos}`;S("update-title",{title:u,total:e.total_pedidos})}}).catch(a=>{console.error("Error al obtener datos del distribuidor:",a)})}function k(){x.value=!0;const d=1,a=`${$}/apigw/v1/pedido_distribuidor_conteo_pedidos/${p.value}/${d}`;I.get(a).then(e=>{const l=Array.isArray(e.data)?e.data:[e.data];v.value=l,l.length>0&&l[0].almacen&&l[0].almacen.nombre&&(C.value=l[0].almacen.nombre)}).catch(e=>{console.error("Error al obtener datos de pedidos:",e),v.value=[]}).then(()=>{x.value=!1})}function z(d){D.value=!0,g.value=!0,w.value=d;const a=`${$}/apigw/v1/pedido_distribuidor_detalles/${d}`;I.get(a).then(e=>{m.value=e.data}).catch(e=>{console.error("Error al obtener detalles del pedido:",e),m.value=null}).then(()=>{D.value=!1})}function W(d){switch(d.toLowerCase()){case"pendiente":return"light-blue";case"en proceso":return"amber";case"entregado":return"light-green";case"anulado":return"red";default:return"grey"}}return(d,a)=>(i(),X(M,null,{default:s(()=>[o(O,{class:"d-flex justify-space-between align-center"},{default:s(()=>[t("span",null,n(C.value),1),t("div",ke,[o(K,{color:"primary",class:"mr-2","prepend-icon":"mdi-calendar"},{default:s(()=>[_(n(U(p.value)),1)]),_:1}),o(N,{color:"primary",variant:"text","prepend-icon":"mdi-calendar",size:"small",onClick:Y},{default:s(()=>[Ce]),_:1})])]),_:1}),o(Z,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),width:"auto",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition"},{default:s(()=>[o(M,null,{default:s(()=>[o(Q,{class:"pa-4"},{default:s(()=>[t("div",Ve,[Ae,pe(t("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),class:"date-input",onChange:J},null,544),[[_e,p.value]])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Z,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),"max-width":"600px",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition",position:"center",class:"mx-auto detail-dialog-container"},{default:s(()=>[o(M,{class:"mx-auto"},{default:s(()=>[o(O,{class:"text-h5 bg-primary text-white"},{default:s(()=>[w.value!==null?(i(),c("span",Ee,"Pedido #"+n(w.value),1)):(i(),c("span",Ue,"Detalle de Pedido"))]),_:1}),o(Q,{class:"pa-4"},{default:s(()=>[D.value?(i(),c("div",Pe,[o(fe,{indeterminate:"",color:"primary",class:"my-6"})])):m.value?(i(),c("div",Te,[Ie,o(he,null,{default:s(()=>[(i(!0),c(ee,null,te(m.value.detallesPedidos,(e,l)=>(i(),X($e,{key:l},{default:s(()=>[o(xe,null,{default:s(()=>[_(n(e.productoInfo.nombre)+" - "+n(e.cantidad)+" unidades ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(i(),c("div",Ne," No se pudieron cargar los detalles del pedido "))]),_:1}),o(ge,null,{default:s(()=>[o(ve),o(N,{color:"primary",variant:"text",onClick:a[2]||(a[2]=e=>g.value=!1)},{default:s(()=>[Me]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",ze,[o(me,{height:"300px","fixed-header":"",class:"orders-table"},{default:s(()=>[Le,t("tbody",null,[x.value?(i(),c("tr",Fe,je)):v.value.length===0?(i(),c("tr",qe,Ge)):(i(!0),c(ee,{key:2},te(v.value,e=>{var l,u,y,b,P,L,F,H,j,q,B;return i(),c("tr",{key:((l=e.pedido)==null?void 0:l.id)||"default"},[t("td",null,n((u=e.pedido)==null?void 0:u.id),1),t("td",null,n((y=e.cliente)==null?void 0:y.nombre)+" "+n((b=e.cliente)==null?void 0:b.apellidos),1),t("td",null,n((P=e.telefono)==null?void 0:P.telefono),1),t("td",null,[t("div",null,n((L=e.direccion)==null?void 0:L.direccion),1),t("div",Re,[t("a",{href:R((F=e.direccion)==null?void 0:F.latitud,(H=e.direccion)==null?void 0:H.longitud),target:"_blank",class:"google-maps-link"},[o(ae,{size:"small",color:"primary",class:"mr-1"},{default:s(()=>[Je]),_:1}),We],8,Ye)])]),t("td",null,n(G((j=e.pedido)==null?void 0:j.fecha)),1),t("td",null,n((q=e.pedido)==null?void 0:q.total),1),t("td",null,[o(K,{color:W((B=e.pedido)==null?void 0:B.estado),"text-color":"white",size:"small",class:"font-weight-medium estado-chip"},{default:s(()=>{var E;return[_(n((E=e.pedido)==null?void 0:E.estado),1)]}),_:2},1032,["color"])]),t("td",null,[o(N,{size:"small",icon:"",color:"primary",onClick:E=>{var T;return z((T=e.pedido)==null?void 0:T.id)}},{default:s(()=>[o(ae,null,{default:s(()=>[Xe]),_:1})]),_:2},1032,["onClick"])])])}),128))])]),_:1})])]),_:1}))}});var Oe=De(Ke,[["__scopeId","data-v-69bd7c80"]]);const se=f=>(ye("data-v-cb2624c2"),f=f(),be(),f),Qe={class:"d-flex align-center"},Ze=_(" Seleccionar fecha "),et={class:"d-flex flex-column align-center"},tt=se(()=>t("h3",{class:"mb-4 text-primary"},"Seleccione una fecha",-1)),at={key:0},lt={key:1},ot={key:0,class:"d-flex justify-center"},st={key:1,class:"detalle-pedido"},dt=se(()=>t("div",{class:"info-row"},[t("strong",null,"Productos:")],-1)),nt={key:2,class:"text-center my-4"},it=_(" Cerrar "),rt={class:"mt-4"},ct=se(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left font-weight-bold"},"Id"),t("th",{class:"text-left font-weight-bold"},"Nombre"),t("th",{class:"text-left font-weight-bold"},"Tel\xE9fono"),t("th",{class:"text-left font-weight-bold"},"Direcci\xF3n"),t("th",{class:"text-left font-weight-bold"},"Fecha"),t("th",{class:"text-left font-weight-bold"},"Total"),t("th",{class:"text-left font-weight-bold"},"Estado"),t("th",{class:"text-left font-weight-bold"},"Acciones")])],-1)),ut={key:0},pt=se(()=>t("td",{colspan:"7",class:"text-center"},"Cargando...",-1)),_t=[pt],ft={key:1},ht=se(()=>t("td",{colspan:"7",class:"text-center"},"No hay datos disponibles",-1)),gt=[ht],vt={class:"maps-link"},mt=["href"],yt=_("mdi-map-marker"),bt=_(" Ver en Google Maps "),$t=_("mdi-eye"),xt=le({props:{selectedDate:{type:String,required:!0}},emits:["update-date","update-title"],setup(f,{emit:S}){const A=f,$="http://147.182.251.164:8082",h=r(!1),g=r(!1),p=r(A.selectedDate),v=r([]),x=r(!1),C=r("Cerro Colorado"),m=r(null),D=r(!1),w=r(null);ce(()=>A.selectedDate,d=>{p.value=d,V(),k()}),ue(()=>{V(),k()});function U(d){const[a,e,l]=d.split("-").map(Number);return new Date(a,e-1,l).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}function G(d){if(!d)return"N/A";const a=new Date(d);a.setHours(a.getHours()+5);const e=a.getDate().toString().padStart(2,"0"),l=(a.getMonth()+1).toString().padStart(2,"0"),u=a.getFullYear(),y=a.getHours().toString().padStart(2,"0"),b=a.getMinutes().toString().padStart(2,"0");return`${e}/${l}/${u} ${y}:${b}`}function R(d,a){return!d||!a?"#":`https://www.google.com/maps?q=${d},${a}`}function Y(){h.value=!0}function J(){h.value=!1,S("update-date",p.value),V(),k()}function V(){const d=`${$}/apigw/v1/pedido_distribuidor_conteo/${p.value}`;I.get(d).then(a=>{const e=a.data.find(l=>l.almacen_id===2);if(e&&e.distribuidor&&e.distribuidor.length>0){const l=e.distribuidor[0],u=`Distribuidor ${l.nombres} ${l.apellidos}`;S("update-title",{title:u,total:e.total_pedidos})}}).catch(a=>{console.error("Error al obtener datos del distribuidor:",a)})}function k(){x.value=!0;const d=2,a=`${$}/apigw/v1/pedido_distribuidor_conteo_pedidos/${p.value}/${d}`;I.get(a).then(e=>{const l=Array.isArray(e.data)?e.data:[e.data];v.value=l,l.length>0&&l[0].almacen&&l[0].almacen.nombre&&(C.value=l[0].almacen.nombre)}).catch(e=>{console.error("Error al obtener datos de pedidos:",e),v.value=[]}).then(()=>{x.value=!1})}function z(d){D.value=!0,g.value=!0,w.value=d;const a=`${$}/apigw/v1/pedido_distribuidor_detalles/${d}`;I.get(a).then(e=>{m.value=e.data}).catch(e=>{console.error("Error al obtener detalles del pedido:",e),m.value=null}).then(()=>{D.value=!1})}function W(d){switch(d.toLowerCase()){case"pendiente":return"light-blue";case"en proceso":return"amber";case"entregado":return"light-green";case"anulado":return"red";default:return"grey"}}return(d,a)=>(i(),X(M,null,{default:s(()=>[o(O,{class:"d-flex justify-space-between align-center"},{default:s(()=>[t("span",null,n(C.value),1),t("div",Qe,[o(K,{color:"primary",class:"mr-2","prepend-icon":"mdi-calendar"},{default:s(()=>[_(n(U(p.value)),1)]),_:1}),o(N,{color:"primary",variant:"text","prepend-icon":"mdi-calendar",size:"small",onClick:Y},{default:s(()=>[Ze]),_:1})])]),_:1}),o(Z,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),width:"auto",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition"},{default:s(()=>[o(M,null,{default:s(()=>[o(Q,{class:"pa-4"},{default:s(()=>[t("div",et,[tt,pe(t("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),class:"date-input",onChange:J},null,544),[[_e,p.value]])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Z,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),"max-width":"600px",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition",position:"center",class:"mx-auto detail-dialog-container"},{default:s(()=>[o(M,{class:"mx-auto"},{default:s(()=>[o(O,{class:"text-h5 bg-primary text-white"},{default:s(()=>[w.value!==null?(i(),c("span",at,"Pedido #"+n(w.value),1)):(i(),c("span",lt,"Detalle de Pedido"))]),_:1}),o(Q,{class:"pa-4"},{default:s(()=>[D.value?(i(),c("div",ot,[o(fe,{indeterminate:"",color:"primary",class:"my-6"})])):m.value?(i(),c("div",st,[dt,o(he,null,{default:s(()=>[(i(!0),c(ee,null,te(m.value.detallesPedidos,(e,l)=>(i(),X($e,{key:l},{default:s(()=>[o(xe,null,{default:s(()=>[_(n(e.productoInfo.nombre)+" - "+n(e.cantidad)+" unidades ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(i(),c("div",nt," No se pudieron cargar los detalles del pedido "))]),_:1}),o(ge,null,{default:s(()=>[o(ve),o(N,{color:"primary",variant:"text",onClick:a[2]||(a[2]=e=>g.value=!1)},{default:s(()=>[it]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",rt,[o(me,{height:"300px","fixed-header":"",class:"orders-table"},{default:s(()=>[ct,t("tbody",null,[x.value?(i(),c("tr",ut,_t)):v.value.length===0?(i(),c("tr",ft,gt)):(i(!0),c(ee,{key:2},te(v.value,e=>{var l,u,y,b,P,L,F,H,j,q,B;return i(),c("tr",{key:((l=e.pedido)==null?void 0:l.id)||"default"},[t("td",null,n((u=e.pedido)==null?void 0:u.id),1),t("td",null,n((y=e.cliente)==null?void 0:y.nombre)+" "+n((b=e.cliente)==null?void 0:b.apellidos),1),t("td",null,n((P=e.telefono)==null?void 0:P.telefono),1),t("td",null,[t("div",null,n((L=e.direccion)==null?void 0:L.direccion),1),t("div",vt,[t("a",{href:R((F=e.direccion)==null?void 0:F.latitud,(H=e.direccion)==null?void 0:H.longitud),target:"_blank",class:"google-maps-link"},[o(ae,{size:"small",color:"primary",class:"mr-1"},{default:s(()=>[yt]),_:1}),bt],8,mt)])]),t("td",null,n(G((j=e.pedido)==null?void 0:j.fecha)),1),t("td",null,n((q=e.pedido)==null?void 0:q.total),1),t("td",null,[o(K,{color:W((B=e.pedido)==null?void 0:B.estado),"text-color":"white",size:"small",class:"font-weight-medium estado-chip"},{default:s(()=>{var E;return[_(n((E=e.pedido)==null?void 0:E.estado),1)]}),_:2},1032,["color"])]),t("td",null,[o(N,{size:"small",icon:"",color:"primary",onClick:E=>{var T;return z((T=e.pedido)==null?void 0:T.id)}},{default:s(()=>[o(ae,null,{default:s(()=>[$t]),_:1})]),_:2},1032,["onClick"])])])}),128))])]),_:1})])]),_:1}))}});var Dt=De(xt,[["__scopeId","data-v-cb2624c2"]]);const de=f=>(ye("data-v-b77f056c"),f=f(),be(),f),wt={class:"d-flex align-center"},St=_(" Seleccionar fecha "),kt={class:"d-flex flex-column align-center"},Ct=de(()=>t("h3",{class:"mb-4 text-primary"},"Seleccione una fecha",-1)),Vt={key:0},At={key:1},Et={key:0,class:"d-flex justify-center"},Ut={key:1,class:"detalle-pedido"},Pt=de(()=>t("div",{class:"info-row"},[t("strong",null,"Productos:")],-1)),Tt={key:2,class:"text-center my-4"},It=_(" Cerrar "),Nt={class:"mt-4"},Mt=de(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Id"),t("th",{class:"text-left"},"Nombre"),t("th",{class:"text-left"},"Tel\xE9fono"),t("th",{class:"text-left"},"Direcci\xF3n"),t("th",{class:"text-left"},"Fecha"),t("th",{class:"text-left"},"Total"),t("th",{class:"text-left"},"Estado"),t("th",{class:"text-left"},"Acciones")])],-1)),zt={key:0},Lt=de(()=>t("td",{colspan:"7",class:"text-center"},"Cargando...",-1)),Ft=[Lt],Ht={key:1},jt=de(()=>t("td",{colspan:"7",class:"text-center"},"No hay datos disponibles",-1)),qt=[jt],Bt={class:"maps-link"},Gt=["href"],Rt=_("mdi-map-marker"),Yt=_(" Ver en Google Maps "),Jt=_("mdi-eye"),Wt=le({props:{selectedDate:{type:String,required:!0}},emits:["update-date","update-title"],setup(f,{emit:S}){const A=f,$="http://147.182.251.164:8082",h=r(!1),g=r(!1),p=r(A.selectedDate),v=r([]),x=r(!1),C=r("F\xE1tima"),m=r(null),D=r(!1),w=r(null);ce(()=>A.selectedDate,d=>{p.value=d,V(),k()}),ue(()=>{V(),k()});function U(d){const[a,e,l]=d.split("-").map(Number);return new Date(a,e-1,l).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}function G(d){if(!d)return"N/A";const a=new Date(d);a.setHours(a.getHours()+5);const e=a.getDate().toString().padStart(2,"0"),l=(a.getMonth()+1).toString().padStart(2,"0"),u=a.getFullYear(),y=a.getHours().toString().padStart(2,"0"),b=a.getMinutes().toString().padStart(2,"0");return`${e}/${l}/${u} ${y}:${b}`}function R(d,a){return!d||!a?"#":`https://www.google.com/maps?q=${d},${a}`}function Y(){h.value=!0}function J(){h.value=!1,S("update-date",p.value),V(),k()}function V(){const d=`${$}/apigw/v1/pedido_distribuidor_conteo/${p.value}`;I.get(d).then(a=>{const e=a.data.find(l=>l.almacen_id===3);if(e&&e.distribuidor&&e.distribuidor.length>0){const l=e.distribuidor[0],u=`Distribuidor ${l.nombres} ${l.apellidos}`;S("update-title",{title:u,total:e.total_pedidos})}}).catch(a=>{console.error("Error al obtener datos del distribuidor:",a)})}function k(){x.value=!0;const d=3,a=`${$}/apigw/v1/pedido_distribuidor_conteo_pedidos/${p.value}/${d}`;I.get(a).then(e=>{const l=Array.isArray(e.data)?e.data:[e.data];v.value=l,l.length>0&&l[0].almacen&&l[0].almacen.nombre&&(C.value=l[0].almacen.nombre)}).catch(e=>{console.error("Error al obtener datos de pedidos:",e),v.value=[]}).then(()=>{x.value=!1})}function z(d){D.value=!0,g.value=!0,w.value=d;const a=`${$}/apigw/v1/pedido_distribuidor_detalles/${d}`;I.get(a).then(e=>{m.value=e.data}).catch(e=>{console.error("Error al obtener detalles del pedido:",e),m.value=null}).then(()=>{D.value=!1})}function W(d){switch(d.toLowerCase()){case"pendiente":return"light-blue";case"en proceso":return"amber";case"entregado":return"light-green";case"anulado":return"red";default:return"grey"}}return(d,a)=>(i(),X(M,null,{default:s(()=>[o(O,{class:"d-flex justify-space-between align-center"},{default:s(()=>[t("span",null,n(C.value),1),t("div",wt,[o(K,{color:"primary",class:"mr-2","prepend-icon":"mdi-calendar"},{default:s(()=>[_(n(U(p.value)),1)]),_:1}),o(N,{color:"primary",variant:"text","prepend-icon":"mdi-calendar",size:"small",onClick:Y},{default:s(()=>[St]),_:1})])]),_:1}),o(Z,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),width:"auto",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition"},{default:s(()=>[o(M,null,{default:s(()=>[o(Q,{class:"pa-4"},{default:s(()=>[t("div",kt,[Ct,pe(t("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),class:"date-input",onChange:J},null,544),[[_e,p.value]])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Z,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value=e),"max-width":"600px",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition",position:"center",class:"mx-auto detail-dialog-container"},{default:s(()=>[o(M,{class:"mx-auto"},{default:s(()=>[o(O,{class:"text-h5 bg-primary text-white"},{default:s(()=>[w.value!==null?(i(),c("span",Vt,"Pedido #"+n(w.value),1)):(i(),c("span",At,"Detalle de Pedido"))]),_:1}),o(Q,{class:"pa-4"},{default:s(()=>[D.value?(i(),c("div",Et,[o(fe,{indeterminate:"",color:"primary",class:"my-6"})])):m.value?(i(),c("div",Ut,[Pt,o(he,null,{default:s(()=>[(i(!0),c(ee,null,te(m.value.detallesPedidos,(e,l)=>(i(),X($e,{key:l},{default:s(()=>[o(xe,null,{default:s(()=>[_(n(e.productoInfo.nombre)+" - "+n(e.cantidad)+" unidades ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(i(),c("div",Tt," No se pudieron cargar los detalles del pedido "))]),_:1}),o(ge,null,{default:s(()=>[o(ve),o(N,{color:"primary",variant:"text",onClick:a[2]||(a[2]=e=>g.value=!1)},{default:s(()=>[It]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",Nt,[o(me,{height:"300px","fixed-header":""},{default:s(()=>[Mt,t("tbody",null,[x.value?(i(),c("tr",zt,Ft)):v.value.length===0?(i(),c("tr",Ht,qt)):(i(!0),c(ee,{key:2},te(v.value,e=>{var l,u,y,b,P,L,F,H,j,q,B;return i(),c("tr",{key:((l=e.pedido)==null?void 0:l.id)||"default"},[t("td",null,n((u=e.pedido)==null?void 0:u.id),1),t("td",null,n((y=e.cliente)==null?void 0:y.nombre)+" "+n((b=e.cliente)==null?void 0:b.apellidos),1),t("td",null,n((P=e.telefono)==null?void 0:P.telefono),1),t("td",null,[t("div",null,n((L=e.direccion)==null?void 0:L.direccion),1),t("div",Bt,[t("a",{href:R((F=e.direccion)==null?void 0:F.latitud,(H=e.direccion)==null?void 0:H.longitud),target:"_blank",class:"google-maps-link"},[o(ae,{size:"small",color:"primary",class:"mr-1"},{default:s(()=>[Rt]),_:1}),Yt],8,Gt)])]),t("td",null,n(G((j=e.pedido)==null?void 0:j.fecha)),1),t("td",null,n((q=e.pedido)==null?void 0:q.total),1),t("td",null,[o(K,{color:W((B=e.pedido)==null?void 0:B.estado),"text-color":"white",size:"small",class:"font-weight-medium estado-chip"},{default:s(()=>{var E;return[_(n((E=e.pedido)==null?void 0:E.estado),1)]}),_:2},1032,["color"])]),t("td",null,[o(N,{size:"small",icon:"",color:"primary",onClick:E=>{var T;return z((T=e.pedido)==null?void 0:T.id)}},{default:s(()=>[o(ae,null,{default:s(()=>[Jt]),_:1})]),_:2},1032,["onClick"])])])}),128))])]),_:1})])]),_:1}))}});var Xt=De(Wt,[["__scopeId","data-v-b77f056c"]]);const ne=f=>(ye("data-v-6841bba1"),f=f(),be(),f),Kt={class:"d-flex align-center"},Ot=_(" Seleccionar fecha "),Qt={class:"d-flex flex-column align-center"},Zt=ne(()=>t("h3",{class:"mb-4 text-primary"},"Seleccione una fecha",-1)),ea={key:0},ta={key:1},aa={key:0,class:"d-flex justify-center"},la={key:1,class:"detalle-pedido"},oa=ne(()=>t("div",{class:"info-row"},[t("strong",null,"Productos:")],-1)),sa={key:2,class:"text-center my-4"},da=_(" Cerrar "),na={class:"mt-4"},ia=ne(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Id"),t("th",{class:"text-left"},"Nombre"),t("th",{class:"text-left"},"Tel\xE9fono"),t("th",{class:"text-left"},"Direcci\xF3n"),t("th",{class:"text-left"},"Fecha"),t("th",{class:"text-left"},"Total"),t("th",{class:"text-left"},"Estado"),t("th",{class:"text-left"},"Acciones")])],-1)),ra={key:0},ca=ne(()=>t("td",{colspan:"8",class:"text-center"},"Cargando...",-1)),ua=[ca],pa={key:1},_a=ne(()=>t("td",{colspan:"8",class:"text-center"},"No hay datos disponibles",-1)),fa=[_a],ha={class:"maps-link"},ga=["href"],va=_("mdi-map-marker"),ma=_(" Ver en Google Maps "),ya=_("mdi-eye"),ba=le({props:{selectedDate:{type:String,required:!0}},emits:["update-date","update-title"],setup(f,{emit:S}){const A=f,$="http://147.182.251.164:8082",h=r(!1),g=r(!1),p=r(A.selectedDate),v=r([]),x=r(!1),C=r("Almac\xE9n Socabaya"),m=r(null),D=r(!1),w=r(null),U=4;ce(()=>A.selectedDate,a=>{p.value=a,k(),z()}),ue(()=>{k(),z()});function G(a){const[e,l,u]=a.split("-").map(Number);return new Date(e,l-1,u).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})}function R(a){if(!a)return"N/A";const e=new Date(a);e.setHours(e.getHours()+5);const l=e.getDate().toString().padStart(2,"0"),u=(e.getMonth()+1).toString().padStart(2,"0"),y=e.getFullYear(),b=e.getHours().toString().padStart(2,"0"),P=e.getMinutes().toString().padStart(2,"0");return`${l}/${u}/${y} ${b}:${P}`}function Y(a,e){return!a||!e?"#":`https://www.google.com/maps?q=${a},${e}`}function J(){h.value=!0}function V(){h.value=!1,S("update-date",p.value),k(),z()}function k(){const a=`${$}/apigw/v1/pedido_distribuidor_conteo/${p.value}`;I.get(a).then(e=>{const l=e.data.find(u=>u.almacen_id===U);if(l)if(l.distribuidor&&l.distribuidor.length>0){const u=l.distribuidor[0],y=`Distribuidor ${u.nombres} ${u.apellidos}`;S("update-title",{title:y,total:l.total_pedidos})}else S("update-title",{title:"Distribuidor Almac\xE9n Socabaya",total:l.total_pedidos||0});else S("update-title",{title:"Distribuidor Almac\xE9n Socabaya",total:0})}).catch(e=>{console.error("Error al obtener datos del distribuidor:",e),S("update-title",{title:"Distribuidor Almac\xE9n Socabaya",total:0})})}function z(){x.value=!0;const a=`${$}/apigw/v1/pedido_distribuidor_conteo_pedidos/${p.value}/${U}`;I.get(a).then(e=>{const l=Array.isArray(e.data)?e.data:[e.data];v.value=l,l.length>0&&l[0].almacen&&l[0].almacen.nombre?C.value=`Almac\xE9n ${l[0].almacen.nombre}`:C.value="Almac\xE9n Socabaya"}).catch(e=>{console.error("Error al obtener datos de pedidos:",e),v.value=[],C.value="Almac\xE9n Socabaya"}).then(()=>{x.value=!1})}function W(a){D.value=!0,g.value=!0,w.value=a;const e=`${$}/apigw/v1/pedido_distribuidor_detalles/${a}`;I.get(e).then(l=>{m.value=l.data}).catch(l=>{console.error("Error al obtener detalles del pedido:",l),m.value=null}).then(()=>{D.value=!1})}function d(a){switch(a==null?void 0:a.toLowerCase()){case"pendiente":return"light-blue";case"en proceso":return"amber";case"entregado":return"light-green";case"anulado":return"red";default:return"grey"}}return(a,e)=>(i(),X(M,null,{default:s(()=>[o(O,{class:"d-flex justify-space-between align-center"},{default:s(()=>[t("span",null,n(C.value),1),t("div",Kt,[o(K,{color:"primary",class:"mr-2","prepend-icon":"mdi-calendar"},{default:s(()=>[_(n(G(p.value)),1)]),_:1}),o(N,{color:"primary",variant:"text","prepend-icon":"mdi-calendar",size:"small",onClick:J},{default:s(()=>[Ot]),_:1})])]),_:1}),o(Z,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=l=>h.value=l),width:"auto",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition"},{default:s(()=>[o(M,null,{default:s(()=>[o(Q,{class:"pa-4"},{default:s(()=>[t("div",Qt,[Zt,pe(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),class:"date-input",onChange:V},null,544),[[_e,p.value]])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Z,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=l=>g.value=l),"max-width":"600px",scrim:!0,fullscreen:!1,"overlay-opacity":"0.8",transition:"dialog-transition",position:"center",class:"mx-auto detail-dialog-container"},{default:s(()=>[o(M,{class:"mx-auto"},{default:s(()=>[o(O,{class:"text-h5 bg-primary text-white"},{default:s(()=>[w.value!==null?(i(),c("span",ea,"Pedido #"+n(w.value),1)):(i(),c("span",ta,"Detalle de Pedido"))]),_:1}),o(Q,{class:"pa-4"},{default:s(()=>[D.value?(i(),c("div",aa,[o(fe,{indeterminate:"",color:"primary",class:"my-6"})])):m.value?(i(),c("div",la,[oa,o(he,null,{default:s(()=>[(i(!0),c(ee,null,te(m.value.detallesPedidos,(l,u)=>(i(),X($e,{key:u},{default:s(()=>[o(xe,null,{default:s(()=>[_(n(l.productoInfo.nombre)+" - "+n(l.cantidad)+" unidades ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(i(),c("div",sa," No se pudieron cargar los detalles del pedido "))]),_:1}),o(ge,null,{default:s(()=>[o(ve),o(N,{color:"primary",variant:"text",onClick:e[2]||(e[2]=l=>g.value=!1)},{default:s(()=>[da]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",na,[o(me,{height:"300px","fixed-header":""},{default:s(()=>[ia,t("tbody",null,[x.value?(i(),c("tr",ra,ua)):v.value.length===0?(i(),c("tr",pa,fa)):(i(!0),c(ee,{key:2},te(v.value,l=>{var u,y,b,P,L,F,H,j,q,B,E;return i(),c("tr",{key:((u=l.pedido)==null?void 0:u.id)||"default"},[t("td",null,n((y=l.pedido)==null?void 0:y.id),1),t("td",null,n((b=l.cliente)==null?void 0:b.nombre)+" "+n((P=l.cliente)==null?void 0:P.apellidos),1),t("td",null,n((L=l.telefono)==null?void 0:L.telefono),1),t("td",null,[t("div",null,n((F=l.direccion)==null?void 0:F.direccion),1),t("div",ha,[t("a",{href:Y((H=l.direccion)==null?void 0:H.latitud,(j=l.direccion)==null?void 0:j.longitud),target:"_blank",class:"google-maps-link"},[o(ae,{size:"small",color:"primary",class:"mr-1"},{default:s(()=>[va]),_:1}),ma],8,ga)])]),t("td",null,n(R((q=l.pedido)==null?void 0:q.fecha)),1),t("td",null,n((B=l.pedido)==null?void 0:B.total),1),t("td",null,[o(K,{color:d((E=l.pedido)==null?void 0:E.estado),"text-color":"white",size:"small",class:"font-weight-medium estado-chip"},{default:s(()=>{var T;return[_(n((T=l.pedido)==null?void 0:T.estado),1)]}),_:2},1032,["color"])]),t("td",null,[o(N,{size:"small",icon:"",color:"primary",onClick:T=>{var we;return W((we=l.pedido)==null?void 0:we.id)}},{default:s(()=>[o(ae,null,{default:s(()=>[ya]),_:1})]),_:2},1032,["onClick"])])])}),128))])]),_:1})])]),_:1}))}});var $a=De(ba,[["__scopeId","data-v-6841bba1"]]);const Sa=le({setup(f){const S=r(U()),A=r(U()),$=r(U()),h=r(U()),g=r("Distribuidor A"),p=r("30"),v=r("Distribuidor A"),x=r("30"),C=r("Distribuidor A"),m=r("30"),D=r("Distribuidor A"),w=r("30");function U(){const d=new Date,a=d.getFullYear(),e=d.getMonth()+1<10?"0"+(d.getMonth()+1):String(d.getMonth()+1),l=d.getDate()<10?"0"+d.getDate():String(d.getDate());return`${a}-${e}-${l}`}function G(d){S.value=d}function R(d){A.value=d}function Y(d){$.value=d}function J(d){h.value=d}function V(d){g.value=d.title,p.value=String(d.total)}function k(d){v.value=d.title,x.value=String(d.total)}function z(d){C.value=d.title,m.value=String(d.total)}function W(d){D.value=d.title,w.value=String(d.total)}return(d,a)=>(i(),X(Se,null,{default:s(()=>[o(re,{cols:"12"},{default:s(()=>[o(ie,{heading:g.value,total:p.value},{default:s(()=>[o(Oe,{selectedDate:S.value,onUpdateDate:G,onUpdateTitle:V},null,8,["selectedDate"])]),_:1},8,["heading","total"])]),_:1}),o(re,{cols:"12"},{default:s(()=>[o(ie,{heading:v.value,total:x.value},{default:s(()=>[o(Dt,{selectedDate:A.value,onUpdateDate:R,onUpdateTitle:k},null,8,["selectedDate"])]),_:1},8,["heading","total"])]),_:1}),o(re,{cols:"12"},{default:s(()=>[o(ie,{heading:C.value,total:m.value},{default:s(()=>[o(Xt,{selectedDate:$.value,onUpdateDate:Y,onUpdateTitle:z},null,8,["selectedDate"])]),_:1},8,["heading","total"])]),_:1}),o(re,{cols:"12"},{default:s(()=>[o(ie,{heading:D.value,total:w.value},{default:s(()=>[o($a,{selectedDate:h.value,onUpdateDate:J,onUpdateTitle:W},null,8,["selectedDate"])]),_:1},8,["heading","total"])]),_:1})]),_:1}))}});export{Sa as default};
